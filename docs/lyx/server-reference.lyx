#LyX 1.4.4 created this file. For more info see http://www.lyx.org/
\lyxformat 245
\begin_document
\begin_header
\textclass book
\begin_preamble
\usepackage{a4}
\usepackage {times}
\usepackage[left=2cm,right=2cm,top=2cm,bottom=2cm]{geometry}
\let\myTOC\tableofcontents 
\renewcommand{\tableofcontents}{% 
  \begingroup 
%  \let\ps@plain\ps@empty 
  \pagenumbering{roman}
  \myTOC 
  \clearpage 
  \endgroup% 
  \pagenumbering{arabic}
}
\end_preamble
\language english
\inputencoding auto
\fontscheme times
\graphics default
\paperfontsize 12
\spacing single
\papersize a4paper
\use_geometry false
\use_amsmath 1
\cite_engine basic
\use_bibtopic false
\paperorientation portrait
\leftmargin -20cm
\rightmargin -20cm
\secnumdepth 3
\tocdepth 3
\paragraph_separation skip
\defskip medskip
\quotes_language swedish
\papercolumns 1
\papersides 1
\paperpagestyle headings
\tracking_changes false
\output_changes true
\end_header

\begin_body

\begin_layout Standard
\align center
\begin_inset ERT
status collapsed

\begin_layout Standard


\backslash
thispagestyle{empty}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset VSpace vfill
\end_inset


\end_layout

\begin_layout Standard
\align center

\series bold
\size huge
GeoNetwork's Server Reference
\end_layout

\begin_layout Standard
\begin_inset VSpace vfill
\end_inset


\end_layout

\begin_layout Standard
\align center

\size larger
Author: 
\series bold
\noun on
Andrea Carboni
\end_layout

\begin_layout Standard
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Standard
\align center

\size larger
Revision 9 (28-Aug-2007)
\end_layout

\begin_layout Standard

\newpage

\end_layout

\begin_layout Standard
\begin_inset ERT
status collapsed

\begin_layout Standard


\backslash
thispagestyle{empty}
\end_layout

\end_inset


\end_layout

\begin_layout Chapter*
Introduction
\begin_inset ERT
status collapsed

\begin_layout Standard


\backslash
thispagestyle{empty}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
This document gives some insights about the internal structure of GeoNetwork
 opensource.
 It describes some basic operations, like compiling and running the software,
 protocols used, a description of XML services and the Settings structure.
\end_layout

\begin_layout Standard
\begin_inset LatexCommand \tableofcontents{}

\end_inset


\end_layout

\begin_layout Part
Basic Operations
\end_layout

\begin_layout Chapter
Compiling and running GeoNetwork opensource
\end_layout

\begin_layout Section
System Requirements
\end_layout

\begin_layout Standard
GeoNetwork is a Java application that runs as a servlet so the Java Runtime
 Environment (JRE) must be installed in order to run it.
 You can get the JRE from the following address 
\family sans
\series bold
http://java.sun.com
\family default
\series default
 and you have to download the Java 5 Standard Edition (SE).
 GeoNetwork won't run with Java 1.4 and Java 6 has some problems with it
 so we recommend to use Java 5.
 Being written in Java, GeoNetwork can run on any platform that supports
 Java, so it can run on Windows, Linux and Mac OSX.
 For the latter one, make sure to use version 10.4 (Tiger) or newer.
 Version 10.3 (Panther) has only Java 1.4 so it cannot run GeoNetwork.
\end_layout

\begin_layout Standard
Next, you need a servlet container.
 GeoNetwork comes with an embedded one (Jetty) which is fast and well suited
 for most applications.
 If you need a stronger one, you can install Tomcat from the Apache Software
 Foundation (
\family sans
\series bold
http://tomcat.apache.org
\family default
\series default
).
 It provides load balance, fault tolerance and other corporate needed stuff.
 If you work for an organization, it is probable that you already have it
 up and running.
 The tested version is 5.5 but GeoNetwork should work with all other versions.
\end_layout

\begin_layout Standard
Regarding storage, you need a Database Management System (DBMS) like Oracle,
 MySQL, PostgreSQL and so on.
 GeoNetwork comes with an embedded one (McKoi) which is used by default
 during installation.
 This DBMS can be used for small or desktop installations, where the speed
 is not an issue.
 You can use this DBMS for several thousands of metadata.
 If you manage more than 10.000 metadata it is better to use a professional,
 stand alone DBMS.
 In this case, using a separate DBMS also frees up some memory for the applicati
on.
\end_layout

\begin_layout Standard
GeoNetwork does not require a strong machine to run.
 A good performance can be obtained even with 128 Mb of RAM.
 The suggested amount is 512 Mb.
 For the hard disk space, you have to consider the space required for the
 application itself (about 40 Mb) and the space required for data maps,
 which can require 50 Gb or more.
 A simple disk of 250 Gb should be ok.
 Maybe you can choose a fast one to reduce backup time but GeoNetwork itself
 does not speed up on a faster disk.
 You also need some space for the search index which is located in 
\family sans
\series bold
web/WEB-INF/lucene
\family default
\series default
.
 Even with a lot of metadata the index is small so usually 10-20 Mb of space
 is enough.
\end_layout

\begin_layout Section
Running the software
\end_layout

\begin_layout Standard
The software is run in different ways depending on the servlet container
 you are using:
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
Tomcat
\series default
 You can use the manager web application to start/stop GeoNetwork.
 You can also use the 
\family sans
\series bold
startup.*
\family default
\series default
 and 
\family sans
\series bold
shutdown.*
\family default
\series default
 scripts located into Tomcat's 
\family sans
\series bold
bin
\family default
\series default
 folder (.* means .sh or .bat depending on your OS) but this way you restart
 all applications you are running, not only GeoNetwork.
 After installation and before running GeoNetwork you must link it to Tomcat.
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
Jetty
\series default
 If you use the provided container you can use the scripts into GeoNetwork's
 
\family sans
\series bold
bin
\family default
\series default
 folder.
 The scripts are 
\family sans
\series bold
start-geonetwork.*
\family default
\series default
 and 
\family sans
\series bold
stop-geonetwork.*
\family default
\series default
 and you must be inside the 
\family sans
\series bold
bin
\family default
\series default
 folder to run them.
 You can use these scripts just after installation.
\end_layout

\begin_layout Section
Compiling GeoNetwork
\end_layout

\begin_layout Standard
To compile GeoNetwork you first need to install the source code during installat
ion.
 If you do so, you get a 
\family sans
\series bold
build.xml
\family default
\series default
 script and a 
\family sans
\series bold
src
\family default
\series default
 folder with the full source.
\end_layout

\begin_layout Standard
You also need the 
\family sans
\series bold
Ant
\family default
\series default
 tool to run the build script.
 You can download Ant from 
\family sans
\series bold
http://ant.apache.org
\family default
\series default
.
 Version 1.6.5 works but any other recent version should be ok.
 Once installed, you should have the 
\family sans
\series bold
ant
\family default
\series default
 command in your path (on Windows systems, you have to open a shell to check).
\end_layout

\begin_layout Standard
When all is in place, go inside the GeoNetwork's root folder (the one where
 the 
\family sans
\series bold
build.xml
\family default
\series default
 file is located) and issue the 
\family sans
\series bold
ant
\family default
\series default
 command.
 You should see an output like this one:
\end_layout

\begin_layout Standard
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
gemini:/geonetwork/trunk# ant 
\end_layout

\begin_layout LyX-Code

\size footnotesize
Buildfile: build.xml
\end_layout

\begin_layout LyX-Code

\end_layout

\begin_layout LyX-Code

\size footnotesize
compile: 
\end_layout

\begin_layout LyX-Code

\size footnotesize
[delete] Deleting: /geonetwork/trunk/web/WEB-INF/lib/geonetwork.jar 
\end_layout

\begin_layout LyX-Code

\size footnotesize
[delete] Deleting: /geonetwork/trunk/csw/lib/csw-client.jar 
\end_layout

\begin_layout LyX-Code

\size footnotesize
[delete] Deleting: /geonetwork/trunk/csw/lib/csw-common.jar 
\end_layout

\begin_layout LyX-Code

\size footnotesize
[delete] Deleting: /geonetwork/trunk/gast/gast.jar 
\end_layout

\begin_layout LyX-Code

\size footnotesize
 [mkdir] Created dir: /geonetwork/trunk/.build 
\end_layout

\begin_layout LyX-Code

\size footnotesize
 [javac] Compiling 267 source files to /geonetwork/trunk/.build 
\end_layout

\begin_layout LyX-Code

\size footnotesize
 [javac] Note: Some input files use or override a deprecated API.
 
\end_layout

\begin_layout LyX-Code

\size footnotesize
 [javac] Note: Recompile with -Xlint:deprecation for details.
 
\end_layout

\begin_layout LyX-Code

\size footnotesize
 [javac] Note: Some input files use unchecked or unsafe operations.
 
\end_layout

\begin_layout LyX-Code

\size footnotesize
 [javac] Note: Recompile with -Xlint:unchecked for details.
 
\end_layout

\begin_layout LyX-Code

\size footnotesize
  [copy] Copying 1 file to /geonetwork/trunk/.build 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   [jar] Building jar: /geonetwork/trunk/web/WEB-INF/lib/geonetwork.jar 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   [jar] Building jar: /geonetwork/trunk/csw/lib/csw-client.jar 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   [jar] Building jar: /geonetwork/trunk/csw/lib/csw-common.jar 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   [jar] Building jar: /geonetwork/trunk/gast/gast.jar 
\end_layout

\begin_layout LyX-Code

\size footnotesize
[delete] Deleting directory /geonetwork/trunk/.build
\end_layout

\begin_layout LyX-Code

\end_layout

\begin_layout LyX-Code

\size footnotesize
BUILD SUCCESSFUL 
\end_layout

\begin_layout LyX-Code

\size footnotesize
Total time: 9 seconds 
\end_layout

\begin_layout LyX-Code

\size footnotesize
gemini:/geonetwork/trunk#
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The compilation phase, if it has success, puts all jars into the proper
 place (most of them will be copied into 
\family sans
\series bold
web/geonetwork/WEB-INF/lib
\family default
\series default
 and 
\family sans
\series bold
web/intermap/WEB-INF/lib
\family default
\series default
).
 After this phase, simply restart GeoNetwork to see the effects.
\end_layout

\begin_layout Part
Implementation guidelines
\end_layout

\begin_layout Chapter
Harvesting
\end_layout

\begin_layout Section
Structure
\end_layout

\begin_layout Standard
The harvesting capability is built around 3 areas: Javascript code, Java
 code and XSL stylesheets (on both the server and client side).
\end_layout

\begin_layout Subsection*

\series bold
Javascript code
\end_layout

\begin_layout Standard
This refers to the web interface.
 The code is located in the 
\family sans
web/geonetwork/scripts/harvesting
\family default
 folder.
 Here, there is a subfolder for each harvesting type plus some classes for
 the main page.
 These are:
\end_layout

\begin_layout Itemize

\series bold
harvester.js
\series default
 : This is an abstract class that must be implemented by harvesting types.
 It defines some information retrieval methods (
\family sans
getType
\family default
, 
\family sans
getLabel
\family default
, etc...) used to handle the harvesting type, plus one 
\family sans
getUpdateRequest
\family default
 method used to build the XML request to insert or update entries.
\end_layout

\begin_layout Itemize

\series bold
harvester-model.js
\series default
 : Another abstract class that must be implemented by harvesting types.
 When creating the XML request, the only method 
\family sans
substituteCommon
\family default
 takes care of adding common information like privileges and categories
 taken from the user interface.
\end_layout

\begin_layout Itemize

\series bold
harvester-view.js
\series default
 : This is an important abstract class that must be implemented by harvesting
 types.
 It takes care of many common aspects of the user interface.
 It provides methods to add group's privileges, to select categories, to
 check data for validity and to set and get common data from the user interface.
\end_layout

\begin_layout Itemize

\series bold
harvesting.js
\series default
 : This is the main Javascript file that takes care of everything.
 It starts all the submodules, loads XML strings from the server and displays
 the main page that lists all harvesting nodes.
\end_layout

\begin_layout Itemize

\series bold
model.js
\series default
 : Performs all XML requests to the server, handles errors and decode responses.
\end_layout

\begin_layout Itemize

\series bold
view.js
\series default
 : Handles all updates and changes on the main page.
\end_layout

\begin_layout Itemize

\series bold
util.js
\series default
 : just a couple of utility methods.
\end_layout

\begin_layout Subsection*

\series bold
Java code
\end_layout

\begin_layout Standard
The harvesting package is located in src/org/fao/geonet/kernel/harvest.
 Here too, there is one subfolder for each harvesting type.
 The most important classes for the implementor are:
\end_layout

\begin_layout Itemize

\series bold
AbstractHarvester
\series default
 : This is the main class that a new harvesting type must extends.
 It takes care of all aspects like adding, updating, removing, starting,
 stopping of harvesting nodes.
 Some abstract methods must be implemented to properly tune the behaviour
 of a particular harvesting type.
\end_layout

\begin_layout Itemize

\series bold
AbstractParams
\series default
 : All harvesting parameters must be enclosed in a class that extends this
 abstract one.
 Doing so, all common parameters can be transparently handled by this abstract
 class.
\end_layout

\begin_layout Standard
All others are small utility classes used by harvesting types.
\end_layout

\begin_layout Subsection*

\series bold
XSL stylesheets
\end_layout

\begin_layout Standard
Stylesheets are spread in some foders and are used by both the Javascript
 code and the server.
 The main folder is located at web/geonetwork/xsl/harvesting.
 Here there are some general stylesheets, plus one subfolder for each harvesting
 type.
 The general stylesheets are:
\end_layout

\begin_layout Itemize

\series bold
buttons.xsl
\series default
 : Defines all button present in the main page (
\emph on
activate
\emph default
, 
\emph on
deactivate
\emph default
, 
\emph on
run
\emph default
, 
\emph on
remove
\emph default
, 
\emph on
back
\emph default
, 
\emph on
add
\emph default
, 
\emph on
refresh
\emph default
), buttons present in the "add new harvesting" page (
\emph on
back
\emph default
 and 
\emph on
add
\emph default
) and at the bottom of the edit page (
\emph on
back
\emph default
 and 
\emph on
save
\emph default
).
\end_layout

\begin_layout Itemize

\series bold
client-error-tip.xsl
\series default
 : This stylesheet is used by the browser to build tooltips when an harvesting
 error occured.
 It will show the error class, the message and the stacktrace.
\end_layout

\begin_layout Itemize

\series bold
client-node-row.xsl
\series default
 : This is also used by the browser to add one row to the list of harvesting
 nodes in the main page.
\end_layout

\begin_layout Itemize

\series bold
harvesting.xsl
\series default
 : This is the main stylesheet.
 It generates the html page of the main page and includes all panels from
 all the harvesting nodes.
\end_layout

\begin_layout Standard
In each subfolder, there are usually 4 files:
\end_layout

\begin_layout Itemize

\series bold
xxx.xsl
\series default
 : This is the server stylesheets who builds all panels for editing the
 parameters.
 XXX is the harvesting type.
 Usually, it has the following panels: site information, search criteria,
 options, privileges and categories.
\end_layout

\begin_layout Itemize

\series bold
client-privil-row.xsl
\series default
 : This is used by the Javascript code to add rows in the group's privileges
 panel.
\end_layout

\begin_layout Itemize

\series bold
client-result-tip.xsl
\series default
 : This is used by the Javascript code (which inherits from harvester-view.js)
 to show the tooltip when the harvesting has been successfull.
\end_layout

\begin_layout Itemize

\series bold
client-search-row.xsl
\series default
 : Used in some harvesting types to generate the html for the search criteria
 panel.
\end_layout

\begin_layout Standard
As you may have guessed, all client side stylesheets (those used by Javascript
 code) start with the prefix 
\family sans
\series bold
client-
\family default
\series default
.
\end_layout

\begin_layout Standard
Another set of stylesheets are located in 
\family sans
web/geonetwork/xsl/xml/harvesting
\family default
 and are used by the 
\family sans
xml.harvesting.get
\family default
 service.
 This service is used by the Javascript code to retrieve all the nodes the
 system is currently harvesting from.
 This implies that a stylesheet (one for each harvesting type) must be provided
 to convert from the internal setting structure to an XML structure suitable
 to clients.
\end_layout

\begin_layout Standard
The last file to take into consideration contains all localized strings
 and is located at 
\family sans
web/geonetwork/loc/XX/xml/harvesting.xml
\family default
 (where XX refers to a language code).
 This file is used by both Javascript code and the server.
\end_layout

\begin_layout Section
Data storage
\end_layout

\begin_layout Standard
Harvesting nodes are stored inside the 
\family sans
\series bold
Settings
\family default
\series default
 table.
 Further useful information can be found in chapters 
\begin_inset LatexCommand \ref{cha:Harvesting-services}

\end_inset

 and 
\begin_inset LatexCommand \ref{cha:Settings-hierarchy}

\end_inset

.
\end_layout

\begin_layout Standard
The 
\family sans
\series bold
SourceNames
\family default
\series default
 table is used to keep track of the uuid/name couple when metadata get migrated
 to different sites.
\end_layout

\begin_layout Section
Guidelines
\end_layout

\begin_layout Standard
To add a new harvesting type, follows these steps:
\end_layout

\begin_layout Itemize
Add the proper folder in 
\family sans
web/scripts/harvesting
\family default
, maybe copying an already existing one.
\end_layout

\begin_layout Itemize
Edit the 
\family sans
harvesting.js
\family default
 file to include the new type (edit both 
\family sans
\series bold
constructor
\family default
\series default
 and 
\family sans
\series bold
init
\family default
\series default
 methods).
\end_layout

\begin_layout Itemize
Add the proper folder in 
\family sans
web/xsl/harvesting
\family default
 (again, it is easy to copy from an already existing one).
\end_layout

\begin_layout Itemize
Edit the stylesheet 
\family sans
web/xsl/harvesting/harvesting.xsl
\family default
 and add the new type
\end_layout

\begin_layout Itemize
Add the transformation stylesheet in 
\family sans
web/xsl/xml/harvesting
\family default
.
 Its name must match the string used for the harvesting type.
\end_layout

\begin_layout Itemize
Add the Java code in a package inside 
\family sans
org.fao.geonet.kernel.harvest.harvester
\family default
.
\end_layout

\begin_layout Itemize
Add proper strings in 
\family sans
web/geonetwork/loc/XX/xml/harvesting.xml
\family default
.
\end_layout

\begin_layout Standard
Here follows a list of general notes to follow when adding a new harvesting
 type:
\end_layout

\begin_layout Itemize
Every harvesting node (not type) must generate its UUID.
 This uuid is used to remove metadata when the harvesting node is removed
 and to check if a metadata (which has another uuid) has been already harvested
 by another node.
\end_layout

\begin_layout Itemize
If a harvesting type supports multiple searches on a remote site, these
 must be done sequentially and results merged.
 
\end_layout

\begin_layout Itemize
Every harvesting type must save in the folder 
\family sans
images/logos
\family default
 a GIF image whose name is the node's uuid.
 This image must be deleted when the harvesting node is removed.
 This is necessary to propagate harvesting information to other GeoNetwork
 nodes.
\end_layout

\begin_layout Itemize
When a harvesting node is removed, all collected metadata must be removed
 too.
\end_layout

\begin_layout Itemize
During harvesting, take in mind that a metadata could have been removed
 just after being added to the result list.
 In this case the metadata should be skipped and no exception raised.
\end_layout

\begin_layout Itemize
The only settable privileges are: 
\family sans
view
\family default
, 
\family sans
dynamic
\family default
, 
\family sans
featured
\family default
.
 It does not make sense to use the others.
\end_layout

\begin_layout Itemize
If a node raises an exception during harvesting, that node will be deactivated.
\end_layout

\begin_layout Itemize
If a metadata already exists (its uuid exists) but belong to another node,
 it must not be updated even if it has been changed.
 This way the harvesting will not conflict with the other one.
 As a side effect, this prevent locally created metadata from being changed.
\end_layout

\begin_layout Itemize
The harvesting engine does not store results on disk so they will get lost
 when the server will be restarted.
\end_layout

\begin_layout Itemize
When some harvesting parameters are changed, the new harvesting type must
 use them during the next harvesting without requiring to reboot the server.
\end_layout

\begin_layout Part
File formats
\end_layout

\begin_layout Chapter
\begin_inset LatexCommand \label{cha:mef}

\end_inset

Metadata Exchange Format v1.0
\end_layout

\begin_layout Section
Introduction
\end_layout

\begin_layout Standard
The metadata exchange format (
\series bold
MEF
\series default
 in short) is a special designed file format whose purpose is to allow metadata
 exchange between different platforms.
 A metadata exported into this format can be imported by any platform which
 is able to understand it.
 This format has been developed with GeoNetwork in mind so the information
 it contains is mainly related to it.
 Nevertheless, it can be used as an interoperability format between any
 platform.
\end_layout

\begin_layout Standard
This format has been designed with these needs in mind:
\end_layout

\begin_layout Itemize
Export a metadata record for backup purposes
\end_layout

\begin_layout Itemize
Import a metadata record from a previous backup
\end_layout

\begin_layout Itemize
Import a metadata record from a different GeoNetwork version to allow a
 smooth migration from one version to another.
\end_layout

\begin_layout Standard
All these operations regard the metadata and its related data as well.
\end_layout

\begin_layout Standard
In the paragraphs below, some terms should be intended as follows:
\end_layout

\begin_layout Itemize
the term 
\series bold
actor
\series default
 is used to indicate any system (application, service etc...) that operates
 on metadata.
\end_layout

\begin_layout Itemize
the term 
\series bold
reader
\series default
 will be used to indicate any actor that can import metadata from a MEF
 file.
\end_layout

\begin_layout Itemize
the term 
\series bold
writer
\series default
 will be used to indicate any actor that can generate a MEF file.
\end_layout

\begin_layout Section
File format
\end_layout

\begin_layout Standard
A MEF file is simply a ZIP file which contains the following files:
\end_layout

\begin_layout Itemize

\series bold
metadata.xml
\series default
 : this file contains the metadata itself, in XML format.
 The text encoding of the metadata is that one specified into the XML declaratio
n.
\end_layout

\begin_layout Itemize

\series bold
info.xml
\series default
 : this is a special XML file which contains information related to the
 metadata but that cannot be stored into it.
 Examples of such information are the creation date, the last change date,
 privileges on the metadata and so on.
 Now this information is related to the GeoNetwork's architecture.
\end_layout

\begin_layout Itemize

\series bold
public
\series default
 : this is a directory used to store the metadata thumbnails and other public
 files.
 There are no restrictions on the images' format but it is strongly recommended
 to use the portable network graphics (PNG), the JPEG or the GIF formats.
\end_layout

\begin_layout Itemize

\series bold
private
\series default
 : this is a directory used to store all data (maps, shape files etc...) associated
 to the metadata.
 Files in this directory are 
\emph on
private
\emph default
 in the sense that an authorization is required to access them.
 There are no restrictions on the file types that can be stored into this
 directory.
\end_layout

\begin_layout Standard
Any other file or directory present into the MEF file should be ignored
 by readers that don't recognize them.
 This allows actors to add custom extensions to the MEF file.
\end_layout

\begin_layout Standard
A MEF file can have empty 
\series bold
public
\series default
 and 
\series bold
private
\series default
 folders depending on the export format, which can be:
\end_layout

\begin_layout Itemize

\series bold
simple
\series default
 : both public and private are omitted.
\end_layout

\begin_layout Itemize

\series bold
partial
\series default
 : only public files are provided.
\end_layout

\begin_layout Itemize

\series bold
full
\series default
 : both public and private files are provided.
\end_layout

\begin_layout Standard
It is recommended to use the 
\family sans
\series bold
.mef
\family default
\series default
 extension when naming MEF files.
\end_layout

\begin_layout Section
The 
\family sans
info.xml
\family default
 file
\end_layout

\begin_layout Standard
This file contains general information about a metadata.
 It must have an 
\family sans
\series bold
info
\family default
\series default
 root element with a mandatory 
\family sans
\series bold
version
\family default
\series default
 attribute.
 This attribute must be in the X.Y form, where X represents the major version
 and Y the minor one.
 The purpose of this attribute is to allow future changes of this format
 maintaining compatibility with older readers.
 The policy behind the version is this:
\end_layout

\begin_layout Itemize
A change to Y means a minor change.
 All existing elements in the previous version must be left unchanged: only
 new elements or attributes may be added.
 A reader capable of reading version X.Y is also capable of reading version
 X.Y' with Y'>Y.
\end_layout

\begin_layout Itemize
A change to X means a major change.
 Usually, a reader of version X.Y is not able to read version X'.Y with X'>X.
\end_layout

\begin_layout Standard
The root element must have the following children:
\end_layout

\begin_layout Itemize

\family sans
\series bold
general
\family default
\series default
 : a container for general information.
 It must have the following children:
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
uuid
\family default
\series default
 : this is the universally unique identifier assigned to the metadata and
 must be a valid uuid.
 This element is optional and, when omitted, the reader should generate
 one.
 A metadata without a uuid can be imported several times into the same system
 without breaking uniqueness constraints.
 When missing, the reader should also generate the 
\family sans
\series bold
siteId
\family default
\series default
 value.
\end_layout

\begin_layout Itemize

\family sans
\series bold
createDate
\family default
\series default
 : This date indicates when the metadata was created.
 
\end_layout

\begin_layout Itemize

\family sans
\series bold
changeDate
\family default
\series default
 : This date keeps track of the most recent change to the metadata.
 
\end_layout

\begin_layout Itemize

\family sans
\series bold
siteId
\family default
\series default
 : This is an uuid that identifies the actor that created the metadata and
 must be a valid uuid.
 When the 
\family sans
\series bold
uuid
\family default
\series default
 element is missing, this element should be missing too.
 If present, it will be ignored.
\end_layout

\begin_layout Itemize

\family sans
\series bold
siteName
\family default
\series default
 : This is a human readable name for the actor that created the metadata.
 It must be present only if the 
\family sans
\series bold
siteId
\family default
\series default
 is present.
\end_layout

\begin_layout Itemize

\family sans
\series bold
schema
\family default
\series default
 : Indicates the metadata's schema.
 The value can be assigned as will but if the schema is one of those describe
 below, that value must be used:
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
dublin
\family default
-
\family sans
core
\family default
\series default
 : A metadata in the dublin core format as described in http://dublincore.org
\end_layout

\begin_layout Itemize

\family sans
\series bold
fgdc
\family default
-
\family sans
std
\family default
\series default
 : A metadata in the Federal Geographic Data Committee.
\end_layout

\begin_layout Itemize

\family sans
\series bold
iso19115
\family default
\series default
 : A metadata in the ISO 19115 format
\end_layout

\begin_layout Itemize

\family sans
\series bold
iso19139
\family default
\series default
 : A metadata in the ISO 19115/2003 format for which the ISO19139 is the
 XML encoding.
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
format
\family default
\series default
 : Indicates the MEF export format.
 The element's value must belong to the following set: { 
\emph on
simple, partial
\emph default
, 
\emph on
full
\emph default
 }.
\end_layout

\begin_layout Itemize

\family sans
\series bold
localId
\family default
\series default
 : This is an optional element.
 If present, indicates the id used locally by the sourceId actor to store
 the metadata.
 Its purpose is just to allow the reuse of the same local id when reimporting
 a metadata.
\end_layout

\begin_layout Itemize

\family sans
\series bold
isTemplate
\family default
\series default
 : A boolean field that indicates if this metadata is a template used to
 create new ones.
 There is no real distinction between a real metadata and a template but
 some actors use it to allow fast metadata creation.
 The value must be: { 
\emph on
true
\emph default
, 
\emph on
false
\emph default
 }.
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
categories
\family default
\series default
 : a container for categories associated to this metadata.
 A category is just a name, like 'audio-video' that classifies the metadata
 to allow an easy search.
 Each category is specified by a 
\series bold
category 
\series default
element which must have a 
\family sans
\series bold
name
\family default
\series default
 attribute.
 This attribute is used to store the category's name.
 If there are no categories, the 
\family sans
\series bold
categories
\family default
\series default
 element will be empty.
\end_layout

\begin_layout Itemize

\family sans
\series bold
privileges
\family default
\series default
 : a container for privileges associated to this metadata.
 Privileges are operations that a group (which represents a set of users)
 can do on a metadata and are specified by a set of 
\family sans
\series bold
group
\family default
\series default
 elements.
 Each one of these, has a mandatory 
\family sans
\series bold
name
\family default
\series default
 attribute to store the group's name and a set of 
\family sans
\series bold
operation
\family default
\series default
 elements used to store the operations allowed on the metadata.
 Each 
\family sans
\series bold
operation
\family default
\series default
 element must have a 
\family sans
\series bold
name
\family default
\series default
 attribute which value must belong to the following set: {
\emph on
 view
\emph default
, 
\emph on
download
\emph default
, 
\emph on
notify
\emph default
, 
\emph on
dynamic
\emph default
, 
\emph on
featured
\emph default
 }.
 If there are no groups or the actor does not have the concept of group,
 the 
\family sans
\series bold
privileges
\family default
\series default
 element will be empty.
 A 
\family sans
\series bold
group
\family default
\series default
 element without any 
\family sans
\series bold
operation
\family default
\series default
 element must be ignored by readers.
\end_layout

\begin_layout Itemize

\family sans
\series bold
public
\family default
\series default
 : All metadata thumbnails (and any other public file) must be listed here.
 This container contains a 
\family sans
\series bold
file
\family default
\series default
 element for each file.
 Mandatory attributes of this element are 
\family sans
\series bold
name
\family default
\series default
, which represents the file's name and 
\family sans
\series bold
changeDate
\family default
\series default
, which contains the date of the latest change to the file.
 The 
\family sans
\series bold
public
\family default
\series default
 element is optional but, if present, must contain all the files present
 in the metadata's 
\family sans
\series bold
public
\family default
\series default
 directory and any reader that imports these files must set the latest change
 date on these using the provided ones.
 The purpose of this element is to provide more information in the case
 the MEF format is used for metadata harvesting.
\end_layout

\begin_layout Itemize

\family sans
\series bold
private
\family default
\series default
 : This element has the same purpose and structure of the 
\family sans
\series bold
public
\family default
\series default
 element but is related to maps and all other private files.
\end_layout

\begin_layout Standard
Any other element or attribute should be ignored by readers that don't understan
d them.
 This allows actors to add custom attributes or subtrees to the XML.
\end_layout

\begin_layout Standard
Figure 
\begin_inset LatexCommand \ref{fig:example-info.xml}

\end_inset

 shows an example of info file.
\end_layout

\begin_layout Subsection*
Date format
\end_layout

\begin_layout Standard
Unless differently specified, all dates in this file must be in the ISO/8601
 format.
 The pattern must be YYYY-MM-DDTHH:mm:SS and the timezone should be the
 local one.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement t
wide false
sideways false
status open

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<info version="1.0">
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <general>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <uuid>0619abc0-708b-eeda-8202-000d98959033</uuid>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <createDate>2006-12-11T10:33:21</createDate>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <changeDate>2006-12-14T08:44:43</changeDate>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <siteId>0619cc50-708b-11da-8202-000d9335906e</siteId>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <siteName>FAO main site</siteName>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <schema>iso19139</schema>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <format>full</format>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <localId>204</localId>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <isTemplate>false</isTemplate>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </general>
\end_layout

\begin_layout LyX-Code

\end_layout

\begin_layout LyX-Code

\size footnotesize
   <categories>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <category name="maps"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <category name="datasets"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </categories>
\end_layout

\begin_layout LyX-Code

\end_layout

\begin_layout LyX-Code

\size footnotesize
   <privileges>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <group name="editors">
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <operation name="view"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <operation name="download"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </group>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </privileges>
\end_layout

\begin_layout LyX-Code

\end_layout

\begin_layout LyX-Code

\size footnotesize
   <public>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <file name="small.png" changeDate="2006-10-07T13:44:32"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <file name="large.png" changeDate="2006-11-11T09:33:21"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </public>
\end_layout

\begin_layout LyX-Code

\end_layout

\begin_layout LyX-Code

\size footnotesize
   <private>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <file name="map.zip" changeDate="2006-11-12T13:23:01"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </private>
\end_layout

\begin_layout LyX-Code

\size footnotesize
</info>
\end_layout

\end_inset


\end_layout

\begin_layout Caption
\begin_inset LatexCommand \label{fig:example-info.xml}

\end_inset

Example of info file
\end_layout

\end_inset


\end_layout

\begin_layout Part
XML Services
\end_layout

\begin_layout Chapter
Calling specifications
\end_layout

\begin_layout Section
Calling XML services
\end_layout

\begin_layout Standard
GeoNetwork provides access to several internal structures through the use
 of XML services.
 These are much like HTML addresses but return XML instead.
 As an example, consider the 
\family sans
\series bold
xml.info
\family default
\series default
 service: you can use this service to get some system's information without
 fancy styles and graphics.
 In GeoNetwork, XML services have usually the 
\family sans
\series bold
xml.

\family default
\series default
 prefix in their address.
\end_layout

\begin_layout Subsection
Request
\end_layout

\begin_layout Standard
Each service accepts a set of parameters, which must be embedded into the
 request.
 A service can be called using different HTTP methods, depending on the
 structure of its request:
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
GET
\series default
 The parameters are sent using the URL address.
 On the server side, these parameters are grouped into a flat XML document
 with one root and several simple children.
 A service can be called this way only if the parameters it accepts are
 not structured.
 Figure 
\begin_inset LatexCommand \ref{fig:xml-get-request}

\end_inset

 shows an example of such request and the parameters encoded in XML.
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
POST
\series default
 There are 3 variants of this method:
\end_layout

\begin_deeper
\begin_layout List
\labelwidthstring 00.00.0000

\series bold
ENCODED
\series default
 The request has one of the following content types: 
\emph on
application/x-www-form-urlencoded
\emph default
 or 
\emph on
multipart/form-data
\emph default
.
 The first case is very common when sending web forms while the second one
 is used to send binary data (usually files) to the server.
 In these cases, the parameters are not structured so the rules of the GET
 method applies.
 Even if the second case could be used to send XML documents, this possibility
 is not considered on the server side.
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
XML
\series default
 The content type is 
\emph on
application/xml
\emph default
.
 This is the common case when the client is not a browser but a specialized
 client.
 The request is a pure XML document in string form, encoded using the encoding
 specified into the prologue of the XML document.
 Using this form, any type of request can be made (structured or not) so
 any service can be called.
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
SOAP
\series default
 The content type is 
\emph on
application/soap+xml
\emph default
.
 SOAP is a simple protocol used to access objects and services using XML.
 Clients that use this protocol can embed XML requests into a SOAP structure.
 On the server side, GeoNetwork will remove the SOAP structure and feed
 the content to the service.
 Its response will be embedded again into a SOAP structure and sent back
 to the caller.
 It makes sense to use this protocol if it is the only protocol understood
 by the client.
 
\end_layout

\end_deeper
\begin_layout Standard
\align center
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
GET /geonetwork/srv/en/main.search?hitsPerPage=10&any=
\end_layout

\begin_layout LyX-Code

\end_layout

\begin_layout LyX-Code

\size footnotesize
<request>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <hitsPerPage>10</hitsPerPage> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <any /> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
</request> 
\end_layout

\end_inset


\end_layout

\begin_layout Caption
\begin_inset LatexCommand \label{fig:xml-get-request}

\end_inset

A GET request to a XML service and its request encoding
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Response
\end_layout

\begin_layout Standard
The response of an XML service always has a content type of
\emph on
 application/xml
\emph default
 (the only exception are those services which return binary data).
 The document encoding is the one specified into the document's prologue.
 Anyway, all GeoNetwork services return documents in the UTF-8 encoding.
\end_layout

\begin_layout Standard
On a GET request, the client can force a SOAP response adding the 
\emph on
application/soap+xml
\emph default
 content type to the 
\family sans
Accept
\family default
 header parameter.
\end_layout

\begin_layout Section
\begin_inset LatexCommand \label{sec:Exception-handling}

\end_inset

Exception handling
\end_layout

\begin_layout Standard
A response document having an 
\family sans
\series bold
error
\family default
\series default
 root element means that the XML service raised an exception.
 This can happen under several conditions: bad parameters, internal errors
 etc...
 In this cases the returned XML document has the following structure:
\end_layout

\begin_layout Itemize

\family sans
\series bold
error
\family default
\series default
 : This is the root element of the document.
 It has a mandatory 
\family sans
\series bold
id
\family default
\series default
 attribute that represents an identifier of the error from a common set.
 See table 
\begin_inset LatexCommand \ref{tab:summary-of-error-ids}

\end_inset

 for a list of all id values.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
message
\family default
\series default
 : A message related to the error.
 It can be a short description about the error type or it can contain some
 other information that completes the id code.
\end_layout

\begin_layout Itemize

\family sans
\series bold
class
\family default
\series default
 : The Java class of the raised error (name without package information).
\end_layout

\begin_layout Itemize

\family sans
\series bold
stack
\family default
\series default
 : The server's stacktrace up to the point that generated the exception.
 It contains several 
\family sans
\series bold
at
\family default
\series default
 children, one for each nested level.
 Useful for debugging purposes.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
at
\family default
\series default
 : Information about a nested level of called code.
 It has the following mandatory attributes:
\end_layout

\begin_deeper
\begin_layout List
\labelwidthstring 00.00.0000

\family sans
\series bold
class
\family default
\series default
 Java class of the called method.
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\family sans
\series bold
method
\family default
\series default
 Java called method.
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\family sans
\series bold
line
\family default
\series default
 Line, inside the called method's source code where there the method call
 of the next nested level.
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\family sans
\series bold
file
\family default
\series default
 Source file where the class is defined.
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize

\family sans
\series bold
object
\family default
\series default
 : An optional container for parameters or other values that caused the
 exception.
 In case a parameter is an XML object, this container will contain that
 object in XML form.
\end_layout

\begin_layout Itemize

\family sans
\series bold
request
\family default
\series default
 : A container for some useful information that can be needed to debug the
 service.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
language
\family default
\series default
 : Language used when the service was called.
\end_layout

\begin_layout Itemize

\family sans
\series bold
service
\family default
\series default
 : Name of the called service.
\end_layout

\end_deeper
\end_deeper
\begin_layout Standard
\align center
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="16" columns="3">
<features>
<column alignment="left" valignment="top" leftline="true" width="0">
<column alignment="left" valignment="top" leftline="true" width="6cm">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="6cm">
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\family sans
\series bold
id
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\series bold
Meaning of 
\family sans
message
\family default
 element
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\series bold
Meaning of 
\family sans
object
\family default
 element
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
error
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
General message, human readable
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
bad-format
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Reason
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
bad-parameter
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Name of the parameter
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Parameter's bad value
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
file-not-found
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
File's name
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
file-upload-too-big
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
missing-parameter
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Name of the parameter
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
XML container where the parameter should have been present.
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
object-not-found
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Object's name
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
operation-aborted
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Reason of abort
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
If present, the object that caused the abort
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
operation-not-allowed
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
resource-not-found
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Resource's name
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
service-not-allowed
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Service's name
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
service-not-found
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Service's name
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
user-login
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
User login failed message
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
User's name
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
user-not-found
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
User's id or name
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
metadata-not-found
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
The requested metadata was not found
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Metadata's id
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Caption
\begin_inset LatexCommand \label{tab:summary-of-error-ids}

\end_inset

Summary of error ids
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Figure 
\begin_inset LatexCommand \ref{fig:xml-exc-handling}

\end_inset

 shows an example of exception generated by the 
\family sans
\series bold
mef.export
\family default
\series default
 service.
 The service complains about a missing parameter, as you can see from the
 content of the 
\family sans
\series bold
id
\family default
\series default
 attribute.
 The 
\family sans
\series bold
object
\family default
\series default
 element contains the xml request with an unknown 
\family sans
\series bold
test
\family default
\series default
 paremeter while the mandatory 
\family sans
\series bold
uuid
\family default
\series default
 parameter (as specified by the 
\family sans
\series bold
message
\family default
\series default
 element) is missing.
\end_layout

\begin_layout Standard
\align center
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<error id="missing-parameter">   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <message>uuid</message>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <class>MissingParameterEx</class>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <stack>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <at class="jeeves.utils.Util" 
\end_layout

\begin_layout LyX-Code

\size footnotesize
            file="Util.java" line="66" method="getParam"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <at class="org.fao.geonet.services.mef.Export" 
\end_layout

\begin_layout LyX-Code

\size footnotesize
            file="Export.java" line="60" method="exec"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <at class="jeeves.server.dispatchers.ServiceInfo" 
\end_layout

\begin_layout LyX-Code

\size footnotesize
            file="ServiceInfo.java" line="226" method="execService"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <at class="jeeves.server.dispatchers.ServiceInfo" 
\end_layout

\begin_layout LyX-Code

\size footnotesize
            file="ServiceInfo.java" line="129" method="execServices"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <at class="jeeves.server.dispatchers.ServiceManager" 
\end_layout

\begin_layout LyX-Code

\size footnotesize
            file="ServiceManager.java" line="370" method="dispatch"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </stack>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <object>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <request>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <asd>ee</asd>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </request>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </object>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <request>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <language>en</language>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <service>mef.export</service>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </request> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
</error> 
\end_layout

\end_inset


\end_layout

\begin_layout Caption
\begin_inset LatexCommand \label{fig:xml-exc-handling}

\end_inset

An example of generated exception
\end_layout

\end_inset


\end_layout

\begin_layout Chapter
General services
\end_layout

\begin_layout Section
xml.info
\end_layout

\begin_layout Standard
The 
\family sans
xml.info
\family default
 service can be used to query the site about its configuration, services,
 status and so on.
 For example, it is used by the harvesting web interface to retrieve information
 about a remote node.
\end_layout

\begin_layout Subsection*
Request
\end_layout

\begin_layout Standard
The xml request should contain at least one 
\family sans
\series bold
type
\family default
\series default
 element to indicates the kind of information to retrieve.
 More 
\family sans
\series bold
type
\family default
\series default
 elements can be specified to obtain more information at once.
 The set of allowed values are:
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
site
\series default
 Returns general information about the site like its name, id, etc...
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
categories
\series default
 Returns all site's categories
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
groups
\series default
 Returns all site's groups visible to the requesting user.
 If the user does not authenticate theirselves, only the 
\family sans
\series bold
intranet
\family default
\series default
 and the 
\family sans
\series bold
all
\family default
\series default
 groups are visible.
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
operations
\series default
 Returns all possible operations on metadata
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
regions
\series default
 Returns all geographical regions usable for queries
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
sources
\series default
 Returns all geonetwork sources that the remote site knows.
 The result will contain:
\end_layout

\begin_deeper
\begin_layout Itemize
The remote node's name and siteId
\end_layout

\begin_layout Itemize
All source uuids and names that have been discovered through harvesting.
\end_layout

\begin_layout Itemize
All source uuids and names of metadata that have been imported into the
 remote node through the MEF format.
\end_layout

\end_deeper
\begin_layout List
\labelwidthstring 00.00.0000

\series bold
users
\series default
 Returns all users visible to the calling one.
 The visibility policy is the following one:
\end_layout

\begin_deeper
\begin_layout Itemize
Administrators can see all users into the system (normal, other administrators,
 etc...)
\end_layout

\begin_layout Itemize
User administrators can see all users they can administrate and all other
 user administrators in the same group set.
 The group set is defined by all groups visible to the user administration,
 beside the 
\family sans
All
\family default
 and the 
\family sans
intranet
\family default
 groups.
\end_layout

\begin_layout Itemize
A logged user can se only theirself.
\end_layout

\begin_layout Itemize
A guest cannot see any user.
\end_layout

\end_deeper
\begin_layout Standard
Request example:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<request>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <type>site</type>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <type>groups</type>
\end_layout

\begin_layout LyX-Code

\size footnotesize
</request>
\end_layout

\end_inset


\end_layout

\begin_layout Subsection*
Response
\end_layout

\begin_layout Standard
Each 
\family sans
\series bold
type
\family default
\series default
 element produces an XML subtree so the response to the previous request
 is like this:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<info>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <site>...</site>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <categories>...</categories>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <groups>...</groups>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   ...
\end_layout

\begin_layout LyX-Code

\size footnotesize
</info>
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Here follows the structure of each subtree:
\end_layout

\begin_layout Itemize

\family sans
\series bold
site
\family default
\series default
 : This is the container
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
name
\family default
\series default
 : Human readable site name
\end_layout

\begin_layout Itemize

\family sans
\series bold
siteId
\family default
\series default
 : Universal unique identifier of the site
\end_layout

\begin_layout Itemize

\family sans
\series bold
platform
\family default
\series default
 : This is just a container to hold the site's backend
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
name
\family default
\series default
 : Plaform name.
 For GeoNetwork installations it must be 
\family sans
\series bold
geonetwork
\family default
\series default
.
\end_layout

\begin_layout Itemize

\family sans
\series bold
version
\family default
\series default
 : Platform version, given in the X.Y.Z format
\end_layout

\begin_layout Itemize

\series bold
subVersion
\series default
 : Additional version notes, like 'alpha-1' or 'beta-2'.
\end_layout

\end_deeper
\begin_layout Standard
Example:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "s"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<site>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <name>My site</name>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <organization>FAO</organization>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <siteId>0619cc50-708b-11da-8202-000d9335906e</siteId>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <platform>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <name>geonetwork</name>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <version>2.1.0</version>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </platform>
\end_layout

\begin_layout LyX-Code

\size footnotesize
</site>
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
categories
\family default
\series default
 : This is the container for categories.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
category
\family default
\series default
 [0..n] : A single GeoNetwork's category.
 This element has an 
\family sans
\series bold
id
\family default
\series default
 attribute which represents the local identifier for the category.
 It can be usefull to a client to link back to this category.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
name
\family default
\series default
 : Category's name
\end_layout

\begin_layout Itemize

\family sans
\series bold
label
\family default
\series default
 : The localized labels used to show the category on screen.
 See 
\begin_inset LatexCommand \ref{sub:Localized-entities}

\end_inset

 below.
\end_layout

\end_deeper
\begin_layout Standard
Example:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<categories>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <category id="1">
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <name>datasets</name>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <label>
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <en>Datasets</en>
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <fr>I don't know</fr>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </label>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </category>
\end_layout

\begin_layout LyX-Code

\size footnotesize
</categories>
\end_layout

\begin_layout LyX-Code

\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
groups
\family default
\series default
 : This is the container for groups
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
group
\family default
\series default
 [2..n] : This is a Geonetwork group.
 There are at least the internet and intranet groups.
 This element has an 
\family sans
\series bold
id
\family default
\series default
 attribute which represents the local identifier for the group.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
name
\family default
\series default
 : Group's name
\end_layout

\begin_layout Itemize

\family sans
\series bold
description
\family default
\series default
 : Group's description
\end_layout

\begin_layout Itemize

\family sans
\series bold
referrer
\family default
\series default
 : The user responsible for this group
\end_layout

\begin_layout Itemize

\family sans
\series bold
email
\family default
\series default
 : The email address to notify when a map is downloaded
\end_layout

\begin_layout Itemize

\family sans
\series bold
label
\family default
\series default
 : The localized labels used to show the group on screen.
 See 
\begin_inset LatexCommand \ref{sub:Localized-entities}

\end_inset

 below.
\end_layout

\end_deeper
\begin_layout Standard
Example:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<groups>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <group id="1">
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <name>editors</name>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <label>
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <en>Editors</en>
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <fr>I don't know</fr>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </label>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </group>
\end_layout

\begin_layout LyX-Code

\size footnotesize
</groups>
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize

\series bold
operations
\series default
 : This is the container for the operations
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
operation
\series default
 [0..n] : This is a possible operation on metadata.
 This element has an 
\family sans
\series bold
id
\family default
\series default
 attribute which represents the local identifier for the operation.
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
name
\series default
 : Short name for the operation.
\end_layout

\begin_layout Itemize

\series bold
reserved
\series default
 : Can be 
\family sans
\series bold
y
\family default
\series default
 or 
\family sans
\series bold
n
\family default
\series default
 and is used to distinguish between system reserved and user defined operations.
\end_layout

\begin_layout Itemize

\series bold
label
\series default
 : The localized labels used to show the operation on screen.
 See 
\begin_inset LatexCommand \ref{sub:Localized-entities}

\end_inset

 below.
\end_layout

\end_deeper
\begin_layout Standard
Example:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<operations>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <operation id="0">
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <name>view</name>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <label>
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <en>View</en>
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <fr>I don't know</fr>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </label>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </operation>
\end_layout

\begin_layout LyX-Code

\size footnotesize
</operations>
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize

\series bold
regions
\series default
 : This is the container for geographical regions
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
region
\series default
 [0..n] : This is a region present into the system.
 This element has an 
\family sans
\series bold
id
\family default
\series default
 attribute which represents the local identifier for the operation.
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
north
\series default
 : North coordinate of the bounding box.
\end_layout

\begin_layout Itemize

\series bold
south
\series default
 : South coordinate of the bounding box.
\end_layout

\begin_layout Itemize

\series bold
west
\series default
 : West coordinate of the bounding box.
\end_layout

\begin_layout Itemize

\series bold
east
\series default
 : east coordinate of the bounding box.
\end_layout

\begin_layout Itemize

\series bold
label
\series default
 : The localized labels used to show the region on screen.
 See 
\begin_inset LatexCommand \ref{sub:Localized-entities}

\end_inset

 below.
\end_layout

\end_deeper
\begin_layout Standard
Example:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<regions>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <region id="303">
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <north>82.99</north>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <south>26.92</south>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <west>-37.32</west>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <east>39.24</east>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <label>
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <en>Western Europe</en>
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <fr>Western Europe</fr>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </label>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </region> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
</regions>
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\end_layout

\end_deeper
\begin_layout Itemize

\series bold
sources
\series default
 : This is the container.
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
source
\series default
 [0..n] : A source known to the remote node.
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
name
\series default
 : Source's name
\end_layout

\begin_layout Itemize

\series bold
uuid
\series default
 : Source's unique identifier
\end_layout

\end_deeper
\begin_layout Standard
Example:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<sources>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <source>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <name>My Host</name>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <uuid>0619cc50-708b-11da-8202-000d9335906e</uuid>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </source>
\end_layout

\begin_layout LyX-Code

\size footnotesize
</sources>
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Itemize

\series bold
users
\series default
 : This is the container for user information
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
user
\series default
 [0..n] : A user of the system
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
id
\series default
 : The local identifier of the user
\end_layout

\begin_layout Itemize

\series bold
username
\series default
 : The login name
\end_layout

\begin_layout Itemize

\series bold
surname
\series default
 : The user's surname.
 Used for display purposes.
\end_layout

\begin_layout Itemize

\series bold
name
\series default
 : The user's name.
 Used for display purposes.
\end_layout

\begin_layout Itemize

\series bold
profile
\series default
 : User's profile, like Administrator, Editor, UserAdmin etc...
\end_layout

\begin_layout Itemize

\series bold
address
\series default
 :
\end_layout

\begin_layout Itemize

\series bold
state
\series default
 :
\end_layout

\begin_layout Itemize

\series bold
zip
\series default
 :
\end_layout

\begin_layout Itemize

\series bold
country
\series default
 :
\end_layout

\begin_layout Itemize

\series bold
email
\series default
 :
\end_layout

\begin_layout Itemize

\series bold
organisation
\series default
 :
\end_layout

\begin_layout Itemize

\series bold
kind
\series default
 :
\end_layout

\end_deeper
\begin_layout Standard
Example:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<users>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <user> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <id>3</id> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <username>eddi</username> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <surname>Smith</surname>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <name>John</name>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <profile>Editor</profile> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <address/> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <state/> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <zip/> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <country/> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <email/> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <organisation/> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <kind>gov</kind> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </user>
\end_layout

\begin_layout LyX-Code

\size footnotesize
</users>
\end_layout

\end_inset


\end_layout

\end_deeper
\begin_layout Subsection*
\begin_inset LatexCommand \label{sub:Localized-entities}

\end_inset

Localized entities
\end_layout

\begin_layout Standard
Localized entities have a general 
\family sans
\series bold
label
\family default
\series default
 element which contains the localized strings in all supported languages.
 This element has as many children as the supported languages.
 Each child has a name that reflect the language code while its content
 is the localized text.
 Here is an example of such elements:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<label>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <en>Editors</en>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <fr>I don't know</fr>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <es>Neither<es>
\end_layout

\begin_layout LyX-Code

\size footnotesize
</label>
\end_layout

\begin_layout LyX-Code

\end_layout

\end_inset


\end_layout

\begin_layout Section
xml.forward
\end_layout

\begin_layout Standard
This is just a router service.
 It is used by Javascript code to connect to a remote host because a Javascript
 program cannot access a machine other than its server.
 For example, it is used by the harvesting web interface to query a remote
 host and retrieve the list of site ids.
\end_layout

\begin_layout Subsection*
Request
\end_layout

\begin_layout Standard
The service's request has this form:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<request>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <site>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <url>...</url>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <type>...</type>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <account>
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <username>...</username>
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <password>...</password>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </account>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </site>
\end_layout

\begin_layout LyX-Code
   
\size footnotesize
<params>...</params>
\end_layout

\begin_layout LyX-Code

\size footnotesize
</knownNodes>
\end_layout

\end_inset


\end_layout

\begin_layout Standard
where:
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
site
\series default
 A container for site information where the request will be forwarded.
 
\end_layout

\begin_deeper
\begin_layout List
\labelwidthstring 00.00.0000

\series bold
url
\series default
 Indicates the remote url to connect to.
 Usually points to a GeoNetwork's xml service but can point to any XML service.
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
type
\series default
 Its only purpose is to discriminate geonetwork nodes which use a different
 authentication scheme.
 The value 
\family sans
\series bold
geonetwork
\family default
\series default
 indicates these nodes.
 Any other value, or if the element is missing, indicate a generic node.
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
account
\series default
 This element is optional.
 If present, the provided credentials will be used to authenticate to the
 remote site.
\end_layout

\end_deeper
\begin_layout List
\labelwidthstring 00.00.0000

\series bold
params
\series default
 This is just a container for the request that must be executed remotely.
\end_layout

\begin_layout Standard
Example:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<request>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <site>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <url>http://mynode.org:8080/geonetwork/srv/en/xml.info</url>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </site>
\end_layout

\begin_layout LyX-Code
   
\size footnotesize
<params>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <request>
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <type>site<type>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </request>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </params>
\end_layout

\begin_layout LyX-Code

\size footnotesize
</request>
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Please note that this service uses the GeoNetwork's proxy configuration.
\end_layout

\begin_layout Subsection*
Response
\end_layout

\begin_layout Standard
The response is just the response from the remote service.
\end_layout

\begin_layout Chapter
\begin_inset LatexCommand \label{cha:Harvesting-services}

\end_inset

Harvesting services
\end_layout

\begin_layout Section
Introduction
\end_layout

\begin_layout Standard
This chapter provides a detailed explanation of the GeoNetwork's harvesting
 services.
 These services allow a complete control over the harvesting behaviour.
 They are used by the web interface and can be used by any other client.
\end_layout

\begin_layout Section
xml.harvesting.get
\end_layout

\begin_layout Standard
Retrieves information about one or all configured harvesting nodes.
\end_layout

\begin_layout Subsection*
Request
\end_layout

\begin_layout Standard
Called with no parameters returns all nodes.
 Example:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<request/>
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Otherwise, an 
\family sans
\series bold
id
\family default
\series default
 parameter can be specified:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<request>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <id>123</id>
\end_layout

\begin_layout LyX-Code

\size footnotesize
</request>
\end_layout

\end_inset


\end_layout

\begin_layout Subsection*
Response
\end_layout

\begin_layout Standard
When called with no parameters the service provide its output inside a 
\family sans
\series bold
nodes
\family default
\series default
 container.
 You get as many 
\family sans
\series bold
node
\family default
\series default
 elements as are configured.
 Figure 
\begin_inset LatexCommand \ref{fig:example-xml.harv.get1}

\end_inset

 shows an example of output.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement t
wide false
sideways false
status open

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<nodes>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <node id="125" type="geonetwork">
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <site>
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <name>test 1</name>
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <uuid>0619cc50-708b-11da-8202-000d9335aaae</uuid>
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <host>localhost</host>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <port>8080</port>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <servlet>geonetwork</servlet>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <account>         
\end_layout

\begin_layout LyX-Code

\size footnotesize
            <use>false</use>         
\end_layout

\begin_layout LyX-Code

\size footnotesize
            <username />         
\end_layout

\begin_layout LyX-Code

\size footnotesize
            <password />       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         </account>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </site>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <searches>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <search>         
\end_layout

\begin_layout LyX-Code

\size footnotesize
            <freeText />         
\end_layout

\begin_layout LyX-Code

\size footnotesize
            <title />         
\end_layout

\begin_layout LyX-Code

\size footnotesize
            <abstract />         
\end_layout

\begin_layout LyX-Code

\size footnotesize
            <keywords />         
\end_layout

\begin_layout LyX-Code

\size footnotesize
            <digital>false</digital>         
\end_layout

\begin_layout LyX-Code

\size footnotesize
            <hardcopy>false</hardcopy>         
\end_layout

\begin_layout LyX-Code

\size footnotesize
            <source>         
\end_layout

\begin_layout LyX-Code

\size footnotesize
               <uuid>0619cc50-708b-11da-8202-000d9335906e</uuid>
\end_layout

\begin_layout LyX-Code

\size footnotesize
               <name>Food and Agriculture Organization</name>
\end_layout

\begin_layout LyX-Code

\size footnotesize
            </source>         
\end_layout

\begin_layout LyX-Code

\size footnotesize
         </search>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </searches>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <options>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <every>90</every>
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <oneRunOnly>false</oneRunOnly>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <status>inactive</status>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </options>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <info>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <lastRun />
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <running>false</running>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </info>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <groupsCopyPolicy>
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <group name="all" policy="copy"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <group name="mygroup" policy="createAndCopy"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </groupsCopyPolicy>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <categories>
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <category id="4"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </categories>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </node> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
</nodes> 
\end_layout

\end_inset


\end_layout

\begin_layout Caption
\begin_inset LatexCommand \label{fig:example-xml.harv.get1}

\end_inset

Example of an 
\family sans
xml.harvesting.get
\family default
 response for a geonetwork node
\end_layout

\end_inset


\end_layout

\begin_layout Standard
If you specify an id, you get a response like that one in figure 
\begin_inset LatexCommand \ref{fig:example-xml.harv.get2}

\end_inset

 (for a web DAV node).
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement t
wide false
sideways false
status open

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<node id="165" type="webdav">   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <site>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <name>test 1</name>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <uuid>0619cc50-708b-11da-8202-000d9335aaae</uuid>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <url>http://www.mynode.org/metadata</url>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <icon>default.gif</icon>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <account>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <use>true</use>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <username>admin</username>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <password>admin</password>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </account>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </site>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <options>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <every>90</every>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <oneRunOnly>false</oneRunOnly>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <recurse>false</recurse>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <validate>true</validate>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <status>inactive</status>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </options>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <privileges>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <group id="0">       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <operation name="view" />     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </group>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <group id="14">       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <operation name="download" />     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </group>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </privileges>    
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <categories>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <category id="2"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </categories> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <info>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <lastRun />   
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <running>false</running>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </info> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
</node> 
\end_layout

\begin_layout LyX-Code

\end_layout

\end_inset


\end_layout

\begin_layout Caption
\begin_inset LatexCommand \label{fig:example-xml.harv.get2}

\end_inset

Example of an 
\family sans
xml.harvesting.get
\family default
 response for a web DAV node
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The node's structure has a common XML format, plus some additional information
 provided by the harvesting types.
 In the following structure, each element has a cardinality specified using
 the 
\family sans
[x..y]
\family default
 notation, where 
\family sans
x
\family default
 and 
\family sans
y
\family default
 denote the minimum and the maximum values.
 The cardinality [1..1] is omitted for clarity.
\end_layout

\begin_layout Itemize

\family sans
\series bold
node
\family default
\series default
 : The root element.
 It has a mandatory 
\family sans
\series bold
id
\family default
\series default
 attribute that represents the internal identifier and a mandatory 
\family sans
\series bold
type
\family default
\series default
 attribute which indicates the harvesting type.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
site
\family default
\series default
 : A container for site information.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
name
\family default
\series default
 (
\emph on
string
\emph default
) : The node's name used to describe the harvesting.
\end_layout

\begin_layout Itemize

\family sans
\series bold
uuid
\family default
\series default
 (
\emph on
string
\emph default
) : This is a system generated unique identifier associated to the harvesting
 node.
 This is used as the 
\family sans
source
\family default
 field into the 
\family sans
Metadata
\family default
 table to group all metadata from the remote node.
\end_layout

\begin_layout Itemize

\family sans
\series bold
account
\family default
\series default
 : A container for account information.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
use
\family default
\series default
 (
\emph on
boolean
\emph default
) : 
\family sans
\series bold
true
\family default
\series default
 means that the harvester will use the provided username and password to
 authenticate itself.
 The authentication mechanism depends on the harvesting type.
\end_layout

\begin_layout Itemize

\family sans
\series bold
username
\family default
\series default
 (
\emph on
string
\emph default
) : Username on the remote node.
\end_layout

\begin_layout Itemize

\family sans
\series bold
password
\family default
\series default
 (
\emph on
string
\emph default
) : Password on the remote node.
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize

\family sans
\series bold
options
\family default
\series default
 : A container for generic options.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
every
\family default
\series default
 (
\emph on
integer
\emph default
) : Harvesting interval in minutes.
\end_layout

\begin_layout Itemize

\family sans
\series bold
oneRunOnly
\family default
\series default
 (
\emph on
boolean
\emph default
) : After the first run, the entry's status will be set to 
\family sans
\series bold
inactive
\family default
\series default
.
\end_layout

\begin_layout Itemize

\family sans
\series bold
status
\family default
\series default
 (
\emph on
string
\emph default
) : Indicates if the harvesting from this node is stopped (
\family sans
\series bold
inactive
\family default
\series default
) or if the harvester is waiting for the timeout (
\family sans
\series bold
active
\family default
\series default
).
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
privileges
\family default
\series default
 [0..1]: A container for privileges that must be associated to the harvested
 metadata.
 This optional element is present only if the harvesting type supports it.
 
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
group
\family default
\series default
 [0..n] : A container for allowed operations associated to this group.
 It has the 
\family sans
\series bold
id
\family default
\series default
 attribute which value is the identifier of a GeoNetwork group.
 
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
operation
\family default
\series default
 [0..n] : Specifies an operation to associate to the containing group.
 It has a 
\family sans
\series bold
name
\family default
\series default
 attribute which value is one of the supported operation names.
 The only supported operations are : 
\emph on
view
\emph default
, 
\emph on
dynamic
\emph default
, 
\emph on
featured
\emph default
.
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize

\family sans
\series bold
categories
\family default
\series default
 [0..1] : This is a container for categories to assign to each imported metadata.
 This optional element is present if the harvesting type supports it.
 
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
category
\family default
\series default
 (
\emph on
integer
\emph default
) [0..n] : Represents a local category and the 
\family sans
\series bold
id
\family default
\series default
 attribute is its local identifier.
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
info
\family default
\series default
 : A container for general information.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
lastRun
\family default
\series default
 (
\emph on
string
\emph default
) : The lastRun element will be filled as soon as the harvester starts harvestin
g from this entry.
 The value is the 
\end_layout

\begin_layout Itemize

\family sans
\series bold
running
\family default
\series default
 (
\emph on
boolean
\emph default
) : True if the harvester is currently running.
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
error
\family default
\series default
 : This element will be present if the harvester encounters an error during
 harvesting.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
code
\family default
\series default
 (
\emph on
string
\emph default
): The error code, in string form.
\end_layout

\begin_layout Itemize

\family sans
\series bold
message
\family default
\series default
 (
\emph on
string
\emph default
) : The description of the error.
\end_layout

\begin_layout Itemize

\family sans
\series bold
object
\family default
\series default
 (
\emph on
string
\emph default
) : The object that caused the error (if any).
 This element can be present or not depending on the case.
\end_layout

\end_deeper
\end_deeper
\begin_layout Subsection*
Errors
\end_layout

\begin_layout Itemize

\series bold
ObjectNotFoundEx
\series default
 If the 
\family sans
\series bold
id
\family default
\series default
 parameter is provided but the node cannot be found.
\end_layout

\begin_layout Section
xml.harvesting.add
\end_layout

\begin_layout Standard
Create a new harvesting node.
 The node can be of any type supported by GeoNetwork (GeoNetwork node, web
 folder etc...).
 When a new node is created, its status is set to 
\family sans
\series bold
inactive
\family default
\series default
.
 A call to the 
\family sans
\series bold
xml.harvesting.start
\family default
\series default
 service is required to start harvesting.
\end_layout

\begin_layout Subsection*
Request
\end_layout

\begin_layout Standard
The service requires an XML tree with all information the client wants to
 add.
 In the following sections, default values are given in parenthesis (after
 the parameter's type) and are used when the parameter is omitted.
 If no default is provided, the parameter is mandatory.
 If the type is boolean, only the 
\family sans
\series bold
true
\family default
\series default
 and 
\family sans
\series bold
false
\family default
\series default
 strings are allowed.
 
\end_layout

\begin_layout Standard
All harvesting nodes share a common XML structure that must be honored.
 Please, refer to the previous section for elements explanation.
 Each node type can add extra information to that structure.
 The common structure is here described:
\end_layout

\begin_layout Itemize

\family sans
\series bold
node
\family default
\series default
 : The root container.
 The 
\family sans
\series bold
type
\family default
\series default
 attribute is mandatory and must be one of the supported harvesting types.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
site
\family default
\series default
 [0..1]
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
name
\family default
\series default
 (
\emph on
string
\emph default
, '')
\end_layout

\begin_layout Itemize

\family sans
\series bold
account
\family default
\series default
 [0..1]
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
use
\family default
\series default
 (
\emph on
boolean
\emph default
, 'false')
\end_layout

\begin_layout Itemize

\family sans
\series bold
username
\family default
\series default
 (
\emph on
string
\emph default
, '')
\end_layout

\begin_layout Itemize

\family sans
\series bold
password
\family default
\series default
 (
\emph on
string
\emph default
, '')
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize

\family sans
\series bold
options
\family default
\series default
 [0..1]
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
every
\family default
\series default
 (
\emph on
integer
\emph default
, '90')
\end_layout

\begin_layout Itemize

\family sans
\series bold
oneRunOnly
\family default
\series default
 (
\emph on
boolean
\emph default
, 'false')
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
privileges
\family default
\series default
 [0..1]: Can be omitted but doing so the harvested metadata will not be visible.
 Please note that privileges are taken into account only if the harvesting
 type supports them.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
group
\family default
\series default
 [0..n] : It must have the 
\family sans
\series bold
id
\family default
\series default
 attribute which value should be the identifier of a GeoNetwork group.
 If the id is not a valid group id, all contained operations will be discarded.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
operation
\family default
\series default
 [0..n] : It must have a 
\family sans
\series bold
name
\family default
\series default
 attribute which value must be one of the supported operation names.
 
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize

\family sans
\series bold
categories
\family default
\series default
 [0..1] : Please, note that categories will be assigned to metadata only if
 the harvesting type supports them.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
category
\family default
\series default
 (
\emph on
integer
\emph default
) [0..n] : The mandatory 
\family sans
\series bold
id
\family default
\series default
 attribute is the category's local identifier.
\end_layout

\end_deeper
\end_deeper
\begin_layout Standard
Please note that even if clients can store empty values ('') for many parameters
, before starting the harvesting entry those parameters should be properly
 set in order to avoid errors.
\end_layout

\begin_layout Standard
In the following sections, the XML structures described inherit from this
 one here so the common elements have been removed for clarity reasons (unless
 they are containers and contain new children).
\end_layout

\begin_layout Subsubsection*
Standard GeoNetwork harvesting
\end_layout

\begin_layout Standard
To create a node capable of harvesting from another GeoNetwork node, the
 following XML information should be provided:
\end_layout

\begin_layout Itemize

\family sans
\series bold
node
\family default
\series default
 : The 
\family sans
\series bold
type
\family default
\series default
 attribute is mandatory and must be 
\family sans
\series bold
geonetwork
\family default
\series default
.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
site
\family default
\series default
 
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
host
\family default
\series default
 (
\emph on
string
\emph default
, '') : The GeoNetwork node's host name or IP address.
\end_layout

\begin_layout Itemize

\family sans
\series bold
port
\family default
\series default
 (
\emph on
string
\emph default
, '80') : The port to connect to.
\end_layout

\begin_layout Itemize

\family sans
\series bold
servlet
\family default
\series default
 (
\emph on
string
\emph default
, 'geonetwork').
 The servlet name choosen in the remote site.
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
searches
\family default
\series default
 [0..1] : A container for search parameters.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
search
\family default
\series default
 [0..n] : A container for a single search on a siteID.
 You can specify 0 or more searches.
 If no 
\family sans
\series bold
search
\family default
\series default
 element is provided, an unconstrained search is performed.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
freeText
\family default
\series default
 (
\emph on
string
\emph default
, '') : Free text to search.
 This and the following parameters are the same used during normal search
 using the web interface.
\end_layout

\begin_layout Itemize

\family sans
\series bold
title
\family default
\series default
 (
\emph on
string
\emph default
, '') : Search the title field.
\end_layout

\begin_layout Itemize

\family sans
\series bold
abstract
\family default
\series default
 (
\emph on
string
\emph default
, '') : Search the abstract field.
\end_layout

\begin_layout Itemize

\family sans
\series bold
keywords
\family default
\series default
 (
\emph on
string
\emph default
, '') : Search the keywords fields.
\end_layout

\begin_layout Itemize

\family sans
\series bold
digital
\family default
\series default
 (
\emph on
boolean
\emph default
, 'false') : Search for metadata in digital form.
\end_layout

\begin_layout Itemize

\family sans
\series bold
hardcopy
\family default
\series default
 (
\emph on
boolean
\emph default
, 'false') : Search for metadata in printed form.
\end_layout

\begin_layout Itemize

\family sans
\series bold
source
\family default
\series default
 (
\emph on
string
\emph default
, '') : One of the sources present on the remote node.
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize

\family sans
\series bold
groupsCopyPolicy
\family default
\series default
 [0..1] : Container for copy policies of remote groups.
 This mechanism is used to retain remote metadata privileges.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
group
\family default
\series default
 : There is one copy policy for each remote group.
 This element must have 2 mandatory attributes: 
\emph on
name
\emph default
 and 
\emph on
policy
\emph default
.
 The 
\family sans
\series bold
name
\family default
\series default
 attribute is the remote group's name.
 If the remote group is renamed, it is not found anymore and the copy policy
 is skipped.
 The 
\family sans
\series bold
policy
\family default
\series default
 attribute represents the policy itself and can be: 
\emph on
copy
\emph default
, 
\emph on
createAndCopy
\emph default
, 
\emph on
copyToIntranet
\emph default
.
 
\family sans
\series bold
copy
\family default
\series default
 means that remote privileges are copied locally if there is locally a group
 with the same name as the 
\emph on
name
\emph default
 attribute.
 
\family sans
\series bold
createAndCopy
\family default
\series default
 works like 
\emph on
copy
\emph default
 but the group is created locally if it does not exist.
 
\family sans
\series bold
copyToIntranet
\family default
\series default
 works only for the remote group named 
\family sans
\series bold
all
\family default
\series default
, which represents the public group.
 This policy copies privileges of the remote group named 
\emph on
all
\emph default
 to the local intranet group.
 This is usefull to restrict metadata access.
\end_layout

\end_deeper
\end_deeper
\begin_layout Standard
Figure 
\begin_inset LatexCommand \ref{fig:example-xml.harv.add-gn}

\end_inset

 shows an example of an XML request to create a GeoNetwork node.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<node type="geonetwork">   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <site>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <name>South Africa</name>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <host>south.africa.org</host>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <port>8080</port>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <servlet>geonetwork</servlet>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <account>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <use>true</use>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <username>admin</username>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <password>admin</password>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </account>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </site>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <searches>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <search>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <freeText />       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <title />       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <abstract />       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <keywords />       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <digital>true</digital>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <hardcopy>false</hardcopy>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <source>0619cc50-708b-11da-8202-000d9335906e</source>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </search>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </searches>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <options>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <every>90</every>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <oneRunOnly>false</oneRunOnly>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </options> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <groupsCopyPolicy>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <group name="all" policy="copy"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <group name="mygroup" policy="createAndCopy"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </groupsCopyPolicy>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <categories>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <category id="4"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </categories>
\end_layout

\begin_layout LyX-Code

\size footnotesize
</node> 
\end_layout

\begin_layout LyX-Code

\end_layout

\end_inset


\end_layout

\begin_layout Caption
\begin_inset LatexCommand \label{fig:example-xml.harv.add-gn}

\end_inset

Example of an 
\family sans
xml.harvesting.add
\family default
 request for a geonetwork node
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection*
WebDAV harvesting
\end_layout

\begin_layout Standard
To create a web DAV node, the following XML information should be provided.
 
\end_layout

\begin_layout Itemize

\family sans
\series bold
node
\family default
\series default
 : The 
\family sans
\series bold
type
\family default
\series default
 attribute is mandatory and must be 
\family sans
\series bold
webdav
\family default
\series default
.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
site
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
url
\family default
\series default
 (
\emph on
string
\emph default
, '') : The URL to harvest from.
 If provided, must be a valid URL starting with 'HTTP://'.
\end_layout

\begin_layout Itemize

\family sans
\series bold
icon
\family default
\series default
 (
\emph on
string
\emph default
, 'default.gif') : Icon file used to represent this node in the search results.
 The icon must be present into the 
\family sans
\series bold
images/harvesting
\family default
\series default
 folder.
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
options
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
recurse
\family default
\series default
 (
\emph on
boolean
\emph default
, 'false') : When true, folders are scanned recursively to find metadata.
\end_layout

\begin_layout Itemize

\family sans
\series bold
validate
\family default
\series default
 (
\emph on
boolean
\emph default
, 'false') : When true, GeoNetwork will validate every metadata against
 its schema.
 If the metadata is not valid, it will not be imported.
\end_layout

\end_deeper
\end_deeper
\begin_layout Standard
This type supports both privileges and categories assignment.
\end_layout

\begin_layout Standard
Figure 
\begin_inset LatexCommand \ref{fig:example-xml.harv.add-webdav}

\end_inset

 shows an example of an XML request to create a web DAV entry.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement t
wide false
sideways false
status open

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<node type="webdav">   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <site>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <name>Asia remote node</name>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <url>http://www.mynode.org/metadata</url>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <icon>default.gif</icon>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <account>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <use>true</use>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <username>admin</username>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <password>admin</password>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </account>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </site>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <options>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <every>90</every>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <oneRunOnly>false</oneRunOnly>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <recurse>false</recurse>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <validate>true</validate>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </options>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <privileges>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <group id="0">       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <operation name="view" />     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </group>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <group id="14">       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <operation name="features" />     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </group>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </privileges>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <categories>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <category id="4"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </categories>
\end_layout

\begin_layout LyX-Code

\size footnotesize
</node> 
\end_layout

\begin_layout LyX-Code

\end_layout

\end_inset


\end_layout

\begin_layout Caption
\begin_inset LatexCommand \label{fig:example-xml.harv.add-webdav}

\end_inset

Example of an 
\family sans
xml.harvesting.add
\family default
 request for a web DAV node
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection*
CSW harvesting
\end_layout

\begin_layout Standard
To create a node to harvest from a CSW capable server, the following XML
 information should be provided:
\end_layout

\begin_layout Itemize

\family sans
\series bold
node
\family default
\series default
 : The 
\family sans
\series bold
type
\family default
\series default
 attribute is mandatory and must be 
\family sans
\series bold
csw
\family default
\series default
.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
site
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
capabilitiesUrl
\family default
\series default
 (
\emph on
string
\emph default
) : URL of the capabilities file that will be used to retrieve the operations
 address.
\end_layout

\begin_layout Itemize

\family sans
\series bold
icon
\family default
\series default
 (
\emph on
string
\emph default
, 'default.gif') : Icon file used to represent this node in the search results.
 The icon must be present into the 
\family sans
\series bold
images/harvesting
\family default
\series default
 folder.
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
searches
\family default
\series default
 [0..1]
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
search
\family default
\series default
 [0..n] : Contains search parameters.
 If this element is missing, an unconstrained search will be performed.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
freeText
\family default
\series default
 (
\emph on
string
\emph default
, '') : Search the entire metadata.
\end_layout

\begin_layout Itemize

\family sans
\series bold
title
\family default
\series default
 (
\emph on
string
\emph default
, '') : Search the 
\family sans
dc:title
\family default
 queryable.
\end_layout

\begin_layout Itemize

\family sans
\series bold
abstract
\family default
\series default
 (
\emph on
string
\emph default
, ''): Search the 
\family sans
dc:abstract
\family default
 queryable.
\end_layout

\begin_layout Itemize

\family sans
\series bold
subject
\family default
\series default
 (
\emph on
string
\emph default
, '') : Search the 
\family sans
dc:subject
\family default
 queryable.
\end_layout

\end_deeper
\end_deeper
\end_deeper
\begin_layout Standard
This type supports both privileges and categories assignment.
\end_layout

\begin_layout Standard
Figure 
\begin_inset LatexCommand \ref{fig:example-xml.harv.add-csw}

\end_inset

 shows an example of an XML request to create a CSW entry.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement t
wide false
sideways false
status open

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<node type="csw">   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <site>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <name>Minos CSW server</name>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <capabilitiesUrl>http://www.minos.org/csw?request=GetCapabilities
\end_layout

\begin_layout LyX-Code

\size footnotesize
            &amp;service=CSW&amp;acceptVersions=2.0.1</capabilitiesUrl>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <icon>default.gif</icon>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <account>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <use>true</use>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <username>admin</username>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <password>admin</password>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </account>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </site>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <options>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <every>90</every>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <oneRunOnly>false</oneRunOnly>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <recurse>false</recurse>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <validate>true</validate>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </options>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <privileges>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <group id="0">       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <operation name="view" />     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </group>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <group id="14">       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <operation name="features" />     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </group>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </privileges>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <categories>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <category id="4"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </categories>
\end_layout

\begin_layout LyX-Code

\size footnotesize
</node> 
\end_layout

\begin_layout LyX-Code

\end_layout

\end_inset


\end_layout

\begin_layout Caption
\begin_inset LatexCommand \label{fig:example-xml.harv.add-csw}

\end_inset

Example of an 
\family sans
xml.harvesting.add
\family default
 request for a CSW node
\end_layout

\end_inset


\end_layout

\begin_layout Subsection*
Response
\end_layout

\begin_layout Standard
The service's response is the output of the 
\family sans
\series bold
xml.harvesting.get
\family default
\series default
 service of the newly created node.
\end_layout

\begin_layout Subsection*
Summary
\end_layout

\begin_layout Standard
The following table summaries the features of the supported harvesting types:
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="4">
<features>
<column alignment="center" valignment="top" leftline="true" width="0">
<column alignment="center" valignment="top" leftline="true" width="0">
<column alignment="center" valignment="top" leftline="true" width="0">
<column alignment="center" valignment="top" leftline="true" rightline="true" width="0">
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\series bold
Harvesting type
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\series bold
Authentication
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\series bold
Privileges ?
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\series bold
Categories ?
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
GeoNetwork
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
native
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
through policies
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
yes
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Web DAV
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
HTTP digest
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
yes
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
yes
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
CSW
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
HTTP Basic
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
yes
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
yes
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Section
xml.harvesting.update
\end_layout

\begin_layout Standard
This service is responsible for changing the node's parameters.
 A typical request has a 
\family sans
\series bold
node
\family default
\series default
 root element and must include the 
\family sans
\series bold
id
\family default
\series default
 attribute:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<node id="24">
\end_layout

\begin_layout LyX-Code

\size footnotesize
   ...
\end_layout

\begin_layout LyX-Code

\size footnotesize
</node>
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The body of the 
\family sans
\series bold
node
\family default
\series default
 element depends on the node's type.
 The update policy is this:
\end_layout

\begin_layout Itemize
If an element is specified, the associated parameter is updated.
\end_layout

\begin_layout Itemize
If an element is not specified, the associated parameter will not be changed.
\end_layout

\begin_layout Standard
So, you need to specify only the elements you want to change.
 However, there are some exceptions:
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
privileges
\series default
 If this element is omitted, privileges will not be changed.
 If specified, new privileges will replace the old ones.
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
categories
\series default
 Like the previous one.
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
searches
\series default
 Some harvesting types support multiple searches on the same remote note.
 When supported, the updated behaviour should be like the previous ones.
\end_layout

\begin_layout Standard
Note that you cannot change the type of an node once it has been created.
\end_layout

\begin_layout Subsection*
Request
\end_layout

\begin_layout Standard
The request is the same as that used to add an entry.
 Only the 
\family sans
\series bold
id
\family default
\series default
 attribute is mandatory.
\end_layout

\begin_layout Subsection*
Response
\end_layout

\begin_layout Standard
The response is the same as the 
\family sans
\series bold
xml.harvesting.get
\family default
\series default
 called on the updated entry.
\end_layout

\begin_layout Section
xml.harvesting.remove/start/stop/run
\end_layout

\begin_layout Standard
These services are put together because they share a common request interface.
 Their purpose is obviously to remove, start, stop or run a harvesting node.
 In detail:
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
start
\series default
 When created, a node is in the inactive state.
 This operation makes it active, that is the countdown is started and the
 harvesting will be performed at the timeout.
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
stop
\series default
 Makes a node inactive.
 Inactive nodes are never harvested.
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
run
\series default
 Just start the harvester now.
 Used to test the harvesting.
\end_layout

\begin_layout Subsection*
Request
\end_layout

\begin_layout Standard
A set of 
\family sans
\series bold
id
\family default
\series default
s to operate on.
 Example:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<request>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <id>123</id>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <id>456</id>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <id>789</id>
\end_layout

\begin_layout LyX-Code

\size footnotesize
</request>
\end_layout

\end_inset


\end_layout

\begin_layout Standard
If the request is empty, nothing is done.
\end_layout

\begin_layout Subsection*
Response
\end_layout

\begin_layout Standard
The same as the request but every id has a 
\family sans
\series bold
status
\family default
\series default
 attribute indicating the success or failure of the operation.
 For example, the response to the previous request could be:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<request>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <id status="ok">123</id>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <id status="not-found">456</id>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <id status="inactive">789</id>
\end_layout

\begin_layout LyX-Code

\size footnotesize
</request>
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The following table summarizes, for each service, the possible status values:
\end_layout

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="7" columns="5">
<features>
<column alignment="center" valignment="top" leftline="true" rightline="true" width="0">
<column alignment="center" valignment="top" leftline="true" width="0">
<column alignment="center" valignment="top" leftline="true" width="0">
<column alignment="center" valignment="top" leftline="true" width="0">
<column alignment="center" valignment="top" leftline="true" rightline="true" width="0">
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\series bold
Status value
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\series bold
remove
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\series bold
start
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\series bold
stop
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\series bold
run
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
ok
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
+
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
+
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
+
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
+
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
not-found
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
+
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
+
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
+
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
+
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
inactive
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
+
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
already-inactive
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
+
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
already-active
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
+
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
already-running
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
+
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Chapter
System configuration
\end_layout

\begin_layout Section
Introduction
\end_layout

\begin_layout Standard
The GeoNetwork's configuration is made up of a set of parameters that can
 be changed to accomodate any installation need.
 These parameters are subdivided into 2 groups:
\end_layout

\begin_layout Itemize
parameters that can be easily changed through a web interface.
\end_layout

\begin_layout Itemize
parameters not accessible from a web interface and that must be changed
 when the system is not running.
\end_layout

\begin_layout Standard
The first group of parameters can be queried or changed through 2 services:
 
\family sans
\series bold
xml.config.get
\family default
\series default
 and 
\family sans
\series bold
xml.config.update
\family default
\series default
.
 The second group of parameters can be changed using the GAST tool.
\end_layout

\begin_layout Section
xml.config.get
\end_layout

\begin_layout Standard
This service returns the system configuration's parameters.
\end_layout

\begin_layout Subsection*
Request
\end_layout

\begin_layout Standard
No parameters are needed.
\end_layout

\begin_layout Subsection*
Response
\end_layout

\begin_layout Standard
The response is an XML tree similar to the 
\family sans
\series bold
system
\family default
\series default
 hyerarchy into the settings structure.
 See 
\begin_inset LatexCommand \ref{sec:The-system-hierarchy}

\end_inset

 for more information.
 The response has the following elements:
\end_layout

\begin_layout Itemize

\series bold
site
\series default
 : A container for site information.
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
name
\series default
 : Site's name.
\end_layout

\begin_layout Itemize

\series bold
organization
\series default
 : Site's organization name.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
server
\series default
 : A container for server information.
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
host
\series default
 : Name of the host from which the site is reached.
\end_layout

\begin_layout Itemize

\series bold
port
\series default
 : Port number of the previous host.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
intranet
\series default
 : Information about the intranet of the organization.
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
network
\series default
 : IP address that specifies the network.
\end_layout

\begin_layout Itemize

\series bold
netmask
\series default
 : netmask of the network.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
z3950
\series default
 : Configuration about Z39.50 protocol.
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
enable
\series default
 : 
\series bold
true
\series default
 means that the server component is running.
\end_layout

\begin_layout Itemize

\series bold
port
\series default
 : Port number to use to listen for incoming Z39.50 requests.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
proxy
\series default
 : Proxy configuration
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
use
\series default
 : true means that the proxy is used when connecting to external nodes.
\end_layout

\begin_layout Itemize

\series bold
host
\series default
 : Proxy's server host.
\end_layout

\begin_layout Itemize

\series bold
port
\series default
 : Proxy's server port.
\end_layout

\begin_layout Itemize

\series bold
username
\series default
 : Proxy's credentials.
\end_layout

\begin_layout Itemize

\series bold
password
\series default
 : Proxy's credentials.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
feedback
\series default
 : A container for feeback information
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
email
\series default
 : Administrator's email address
\end_layout

\begin_layout Itemize

\series bold
mailServer
\series default
 : Email server to use to send feedback
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
host
\series default
 : Email's host address
\end_layout

\begin_layout Itemize

\series bold
port
\series default
 : Email's port to use in host address
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize

\series bold
removedMetadata
\series default
 : A container for removed metadata information
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
dir
\series default
 : Folder used to store removed metadata in MEF format
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
ldap
\series default
 : A container for LDAP parameters
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
use
\series default
 :
\end_layout

\begin_layout Itemize

\series bold
host
\series default
 :
\end_layout

\begin_layout Itemize

\series bold
port
\series default
 :
\end_layout

\begin_layout Itemize

\series bold
defaultProfile
\series default
 :
\end_layout

\begin_layout Itemize

\series bold
login
\series default
 :
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
userDN
\series default
 :
\end_layout

\begin_layout Itemize

\series bold
password
\series default
 :
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
distinguishedNames
\series default
 :
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
base
\series default
 :
\end_layout

\begin_layout Itemize

\series bold
users
\series default
 :
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
userAttribs
\series default
 :
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
name
\series default
 :
\end_layout

\begin_layout Itemize

\series bold
password
\series default
 :
\end_layout

\begin_layout Itemize

\series bold
profile
\series default
 :
\end_layout

\end_deeper
\end_deeper
\begin_layout Standard
Figure 
\begin_inset LatexCommand \ref{fig:example-xml.config.get}

\end_inset

 shows an example of xml.config.get response.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<config>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <site> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <name>dummy</name> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <organization>dummy</organization> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </site>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <server>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <host>localhost</host> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <port>8080</port> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </server>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <intranet> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <network>127.0.0.1</network> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <netmask>255.255.255.0</netmask> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </intranet>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <z3950> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <enable>true</enable> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <port>2100</port>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </z3950>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <proxy> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <use>false</use> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <host/> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <port/> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <username>proxyuser</username> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <password>proxypass</password> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </proxy>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <feedback> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <email/> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <mailServer> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <host/> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <port>25</port> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </mailServer> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </feedback>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <removedMetadata>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <dir>WEB-INF/removed</dir>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </removedMetadata>  
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <ldap>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <use>false</use>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <host />     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <port />     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <defaultProfile>RegisteredUser</defaultProfile>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <login>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <userDN>cn=Manager</userDN>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <password />     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </login>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <distinguishedNames>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <base>dc=fao,dc=org</base>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <users>ou=people</users>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </distinguishedNames>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <userAttribs>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <name>cn</name>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <password>userPassword</password>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <profile>profile</profile>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </userAttribs>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </ldap>
\end_layout

\begin_layout LyX-Code

\size footnotesize
</config>
\end_layout

\end_inset


\end_layout

\begin_layout Caption
\begin_inset LatexCommand \label{fig:example-xml.config.get}

\end_inset

Example of 
\family sans
xml.config.get
\family default
 response.
\end_layout

\end_inset


\end_layout

\begin_layout Section
xml.config.update
\end_layout

\begin_layout Standard
This service is used to update the system's information and so it is restricted
 to administrators.
 
\end_layout

\begin_layout Subsection*
Request
\end_layout

\begin_layout Standard
The request format must have the same structure returned by the 
\family sans
\series bold
xml.config.get
\family default
\series default
 service and can contain only elements that the caller wants to be updated.
 If an element is not included, it will not be updated.
 However, when included some elements require mandatory information (i.e.
 the value cannot be empty).
 Please, refer to table 
\begin_inset LatexCommand \ref{tab:mand-opt-config-update}

\end_inset

.
\end_layout

\begin_layout Standard
\align center
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="29" columns="3">
<features>
<column alignment="left" valignment="top" leftline="true" width="0">
<column alignment="center" valignment="top" leftline="true" width="0">
<column alignment="center" valignment="top" leftline="true" rightline="true" width="0">
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\series bold
Parameter
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\series bold
Type
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\series bold
Mandatory
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
site/name
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
string
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
yes
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
site/organization
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
string
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
server/host
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
string
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
yes
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
server/port
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
integer
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
intranet/network
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
string
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
yes
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
intranet/netmask
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
string
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
yes
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
z3950/enable
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
bool
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
yes
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
z3950/port
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
integer
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
proxy/use
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
bool
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
yes
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
proxy/host
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
string
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
proxy/port
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
integer
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
proxy/username
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
string
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
proxy/password
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
string
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
feedback/email
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
string
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
feedback/mailServer/host
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
string
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
feedback/mailServer/port
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
integer
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
removedMetadata/dir
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
string
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
yes
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
ldap/use
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
bool
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
yes
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
ldap/host
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
string
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
ldap/port
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
integer
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
ldap/defaultProfile
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
string
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
yes
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
ldap/login/userDN
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
string
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
yes
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
ldap/login/password
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
string
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
ldap/distinguishedNames/base
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
string
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
yes
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
ldap/distinguishedNames/users
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
string
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
yes
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
ldap/userAttribs/name
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
string
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
yes
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
ldap/userAttribs/password
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
string
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
yes
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
ldap/userAttribs/profile
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
string
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
-
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Caption
\begin_inset LatexCommand \label{tab:mand-opt-config-update}

\end_inset

Mandatory and optional parameters for the 
\family sans
\series bold
xml.config.update
\family default
\series default
 service.
\end_layout

\end_inset


\end_layout

\begin_layout Subsection*
Response
\end_layout

\begin_layout Standard
On success, the service returns a response element with the 
\series bold
ok
\series default
 text.
 Example:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<response>ok</response>
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Otherwise a proper error element is returned.
\end_layout

\begin_layout Chapter
MEF services
\end_layout

\begin_layout Section
Introduction
\end_layout

\begin_layout Standard
This chapter describes the services related to the Metadata Exchange Format
 (see chapter 
\begin_inset LatexCommand \ref{cha:mef}

\end_inset

).
 These services allow to import/export metadata using the MEF format.
\end_layout

\begin_layout Section
mef.export
\end_layout

\begin_layout Standard
As the name suggests, this service exports a GeoNetwork's metadata using
 the MEF file format.
\end_layout

\begin_layout Standard
This service is public but metadata access rules apply.
 For a partial export, the 
\family sans
\series bold
view
\family default
\series default
 privilege is enough but for a full export the 
\family sans
\series bold
download
\family default
\series default
 privilege is also required.
 Without a login step, only partial exports on public metadata are allowed.
\end_layout

\begin_layout Standard
This service uses the system's temporary directory to build the MEF file.
 With full exports of big data maybe it is necessary to change this directory.
 In this case, use the Java's -D command line option to set the new directory
 before running GeoNetwork (if you use Jetty, simply change the script into
 the 
\family sans
\series bold
bin
\family default
\series default
 directory).
\end_layout

\begin_layout Subsection*
Request
\end_layout

\begin_layout Standard
This service accepts requests in GET/POST and XML form.
 The input parameters are:
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
uuid
\series default
 the universal unique identifier of the metadata
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
format
\series default
 which format to use.
 Can be one of : 
\family sans
\series bold
simple
\family default
\series default
, 
\family sans
\series bold
partial
\family default
\series default
, 
\family sans
\series bold
full
\family default
\series default
.
\end_layout

\begin_layout List
\labelwidthstring 00.00.0000

\series bold
skipUuid
\series default
 If provided, tells the exporter to not export the metadata's uuid.
 Without the uuid (which is a unique key inside the database) the metadata
 can be imported over and over again.
 Can be one of: 
\family sans
\series bold
true
\family default
\series default
, 
\family sans
\series bold
false
\family default
\series default
.
 The default value is 
\family sans
\series bold
false
\family default
\series default
.
\end_layout

\begin_layout Subsection*
Response
\end_layout

\begin_layout Standard
The service's response is a MEF file with these characteristics:
\end_layout

\begin_layout Itemize
the name of the file is the metadata's uuid
\end_layout

\begin_layout Itemize
the extension of the file is 
\family sans
\series bold
mef
\end_layout

\begin_layout Section
mef.import
\end_layout

\begin_layout Standard
This service is reserved to administrators and is used to import a metadata
 provided in the MEF format.
\end_layout

\begin_layout Subsection*
Request
\end_layout

\begin_layout Standard
The service accepts a multipart/form-data POST request with a single 
\family sans
\series bold
mefFile
\family default
\series default
 parameter that must contain the MEF information.
\end_layout

\begin_layout Subsection*
Response
\end_layout

\begin_layout Standard
If all goes well, the service returns an 
\family sans
\series bold
ok
\family default
\series default
 element containing the local id of the created metadata.
 Example:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<ok>123</ok>
\end_layout

\end_inset


\end_layout

\begin_layout Section
Metadata ownership
\end_layout

\begin_layout Standard
Version 1.0 of the MEF format does not take into account the metadata owner
 (the creator) and the group owner.
 This implies that this information is not contained into the MEF file.
 During import, the user that is performing this operation will become the
 metadata owner and the group owner will be set to null.
\end_layout

\begin_layout Chapter
Relations
\end_layout

\begin_layout Section
Introduction
\end_layout

\begin_layout Standard
This chapter describes general services used to get and set relations between
 metadata records inside GeoNetwork.
 The association is performed by a 
\family sans
\series bold
Relations
\family default
\series default
 table which stores a metadata 
\family sans
\series bold
id
\family default
\series default
 and a metadata 
\family sans
\series bold
relatedId
\family default
\series default
 fields (see figure 
\begin_inset LatexCommand \ref{fig:Structure-of-relations}

\end_inset

).
\end_layout

\begin_layout Standard
\noindent
\align center
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Standard
\noindent
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="3" columns="3">
<features>
<column alignment="center" valignment="top" leftline="true" width="0">
<column alignment="center" valignment="top" leftline="true" width="0">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="0">
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\series bold
Field
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\series bold
Datatype
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\series bold
Description
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
id
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
foreign key to Metadata(id)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Source metadata whose relation is being described.
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
relatedId
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
foreign key to Metadata(id)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
Metadata related to the source one
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Caption
\begin_inset LatexCommand \label{fig:Structure-of-relations}

\end_inset

Structure of table 
\family sans
\series bold
Relations
\end_layout

\end_inset


\end_layout

\begin_layout Section
xml.relation.get
\end_layout

\begin_layout Standard
This service retrieves all relations between metadata.
\end_layout

\begin_layout Subsection*
Request
\end_layout

\begin_layout Standard
The request accepts an 
\family sans
\series bold
id
\family default
\series default
 and a 
\family sans
\series bold
relation
\family default
\series default
 parameters, whose meaning is this:
\end_layout

\begin_layout Itemize

\family sans
\series bold
id
\family default
\series default
 (
\emph on
integer
\emph default
) : This is the local GeoNetwork identifier of the metadata whose relations
 are requested.
\end_layout

\begin_layout Itemize

\family sans
\series bold
relation
\family default
\series default
 (
\emph on
string
\emph default
, 'normal') : This optional parameter identifies the kind of relation that
 the client wants to be returned.
 It can be one of these values :
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
normal
\series default
 : The service performs a query into the 
\family sans
\series bold
id
\family default
\series default
 field and returns all 
\family sans
\series bold
relatedId
\family default
\series default
 records.
\end_layout

\begin_layout Itemize

\series bold
reverse
\series default
 : The service performs a query into the 
\family sans
\series bold
relatedId
\family default
\series default
 field and returns all 
\family sans
\series bold
id
\family default
\series default
 records.
\end_layout

\begin_layout Itemize

\series bold
full
\series default
 : Includes both normal and reverse queries (duplicated ids are removed).
\end_layout

\end_deeper
\begin_layout Standard
Here is an example of POST/XML request:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<request>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <id>10</id> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <relation>full</relation> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
</request> 
\end_layout

\end_inset


\end_layout

\begin_layout Subsection*
Response
\end_layout

\begin_layout Standard
The response has a 
\family sans
\series bold
response
\family default
\series default
 root element with several 
\family sans
\series bold
metadata
\family default
\series default
 children depending on the relations found.
 Example:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<response>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <metadata>...</metadata> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <metadata>...</metadata>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   ...
\end_layout

\begin_layout LyX-Code

\size footnotesize
</response> 
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Each 
\family sans
\series bold
metadata
\family default
\series default
 element has the following structure:
\end_layout

\begin_layout Itemize

\series bold
title
\series default
 : Metadata title
\end_layout

\begin_layout Itemize

\series bold
abstract
\series default
 : A brief explanation of the metadata
\end_layout

\begin_layout Itemize

\series bold
keyword
\series default
 : Keywords found inside the metadata
\end_layout

\begin_layout Itemize

\series bold
image
\series default
 : Information about thumbnails
\end_layout

\begin_layout Itemize

\series bold
link
\series default
 : A link to the source site
\end_layout

\begin_layout Itemize

\series bold
geoBox
\series default
 : coordinates of the bounding box
\end_layout

\begin_layout Itemize

\series bold
geonet:info
\series default
 : A container for GeoNetwork related information
\end_layout

\begin_layout Standard
Here is an example of the structure:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<metadata> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <title>Globally threatened species of the world</title>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <abstract> Contains information on animals.
 </abstract> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <keyword>biodiversity</keyword> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <keyword>endangered animal species</keyword> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <keyword>endangered plant species</keyword> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <link type="url">http://www.mysite.org</link>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <geoBox> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <westBL>-180.0</westBL> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <eastBL>180.0</eastBL> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <southBL>-90.0</southBL> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <northBL>90.0</northBL> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </geoBox>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <geonet:info> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <id>11</id> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <schema>fgdc-std</schema> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <createDate>2005-03-31T19:13:31</createDate> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <changeDate>2007-03-12T14:52:46</changeDate> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <isTemplate>n</isTemplate> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <title/> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <source>38b75c1b-634b-443e-9c36-a12e89b4c866</source>    
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <uuid>84b4190b-de43-4bd7-b25f-6ed47eb239ac</uuid> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <isHarvested>n</isHarvested> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <view>true</view> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <admin>false</admin> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <edit>false</edit> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <notify>false</notify> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <download>true</download> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <dynamic>false</dynamic> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <featured>false</featured> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </geonet:info> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
</metadata>
\end_layout

\end_inset


\end_layout

\begin_layout Chapter
Schema information
\end_layout

\begin_layout Section
Introduction
\end_layout

\begin_layout Standard
GeoNetwork is able to handle several metadata schema formats.
 Up to now, the supported schemas are: 
\end_layout

\begin_layout Itemize

\series bold
ISO-19115
\series default
 (iso19115) : GeoNetwork implements an old version of the draft, which uses
 short names for elements.
 This is not so standard so this schema is obsolete and will be removed
 in future releases.
\end_layout

\begin_layout Itemize

\series bold
ISO-19139
\series default
 (iso19139) : This is the XML encoding of the ISO 19115:2007 metadata specificat
ion.
\end_layout

\begin_layout Itemize

\series bold
Dublin core
\series default
 (dublin-core) : This is a simple metadata schema based on a set of elements
 capable of describing any metadata.
\end_layout

\begin_layout Itemize

\series bold
FGDC
\series default
 (fgdc-std) : It stands for Federal Geographic Data Committee and it is
 a metadata schema used in North America.
\end_layout

\begin_layout Standard
In parenthesis is indicated the name used by GeoNetwork to refer to that
 schema.
 These schemas are handled through their XML schema files (XSD), which GeoNetwor
k loads and interprets to allow the editor to add and remove elements.
 Beside its internal use, GeoNetwork provides some useful XML services to
 find out some element properties, like label, description and so on.
\end_layout

\begin_layout Section
xml.schema.info
\end_layout

\begin_layout Standard
This service returns information about a set of schema elements or codelists.
 The returned information consists of a localized label, a description,
 conditions that the element must satisfy etc...
\end_layout

\begin_layout Subsection*
Request
\end_layout

\begin_layout Standard
Due to its nature, this service accepts only the POST binding with application/X
ML content type.
 The request can contain several 
\family sans
\series bold
element
\family default
\series default
 and 
\family sans
\series bold
codelist
\family default
\series default
 elements.
 Each element indicate the will to retrieve information for that element.
 Here follows the element descriptions:
\end_layout

\begin_layout Itemize

\series bold
element
\series default
 : It must contain a 
\family sans
\series bold
schema
\family default
\series default
 and a 
\family sans
\series bold
name
\family default
\series default
 attribute.
 The first one must be one of the supported schemas (see the section above).
 The second must be the qualified name of the element which information
 must be retrieved.
 The namespace must be declared into this element or into the root element
 of the request.
\end_layout

\begin_layout Itemize

\series bold
codelist
\series default
 : Works like the previous one but returns information about codelists.
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<request xmlns:gmd="http://www.isotc211.org/2005/gmd">   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <element schema="iso19139" name="gmd:constraintLanguage" />   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <codelist schema="iso19115" name="DateTypCd" /> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
</request>
\end_layout

\end_inset


\end_layout

\begin_layout Description
Note The returned text is localized depending on the language specified
 during the service call.
 A call to 
\family sans
/geonetwork/srv/
\series bold
en
\series default
/xml.schema.info
\family default
 will return text in the English language.
\end_layout

\begin_layout Subsection*
Response
\end_layout

\begin_layout Standard
The response's root element will be populated with information of the elements/c
odelists specified into the request.
 The structure is the following:
\end_layout

\begin_layout Itemize

\series bold
element
\series default
 : A container for information about an element.
 It has a 
\series bold
name
\series default
 attribute which contains the qualified name of the element.
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
label
\series default
 : The human readable name of the element, localized into the request's
 language.
\end_layout

\begin_layout Itemize

\series bold
description
\series default
 : A generic description of the element.
\end_layout

\begin_layout Itemize

\series bold
condition
\series default
 [0..1] : This element is optional and indicates if the element must satisfy
 a condition, like the element is always mandatory or is mandatory if another
 one is missing.
\end_layout

\end_deeper
\begin_layout Itemize

\series bold
codelist
\series default
 : A container for information about a codelist.
 It has a 
\series bold
name
\series default
 attribute which contains the qualified name of the codelist.
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
entry
\series default
 [1..n] : A container for a codelist entry.
 There can be many entries.
\end_layout

\begin_deeper
\begin_layout Itemize

\series bold
code
\series default
 : The entry's code.
 This is the value that will be present inside the metadata.
\end_layout

\begin_layout Itemize

\series bold
label
\series default
 : This is a human readable name, used to show the entry into the user interface.
 It is localized.
\end_layout

\begin_layout Itemize

\series bold
description
\series default
 : A generic localized description of the codelist.
\end_layout

\end_deeper
\end_deeper
\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<response>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <element name="gmd:constraintLanguage">     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <label>Constraint language</label>     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <description>language used in Application Schema</description>   
  
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <condition>mandatory</condition>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </element>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <codelist name="DateTypCd">     
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <entry>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <code>creation</code>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <label>Creation</label>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <description>date when the resource was brought into 
\end_layout

\begin_layout LyX-Code

\size footnotesize
               existence</description>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </entry> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <entry>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <code>publication</code>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <label>Publication</label>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <description>date when the resource was issued</description>  
   
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </entry>
\end_layout

\begin_layout LyX-Code

\size footnotesize
      <entry>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <code>revision</code>       
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <label>Revision</label>
\end_layout

\begin_layout LyX-Code

\size footnotesize
         <description>date identifies when the resource was examined
\end_layout

\begin_layout LyX-Code

\size footnotesize
               or re-examined and improved or amended</description>    
 
\end_layout

\begin_layout LyX-Code

\size footnotesize
      </entry>
\end_layout

\begin_layout LyX-Code

\size footnotesize
   </codelist> 
\end_layout

\begin_layout LyX-Code

\size footnotesize
</response> 
\end_layout

\end_inset


\end_layout

\begin_layout Subsection*
Error management
\end_layout

\begin_layout Standard
Beside the normal exceptions management discussed in section 
\begin_inset LatexCommand \ref{sec:Exception-handling}

\end_inset

, the service can encounter some errors trying to retrieve an element/codelist
 information.
 In this case, the object is copied verbatim to the response with the addition
 of an 
\family sans
\series bold
error
\family default
\series default
 attribute that describes the encountered error.
 The returned errors are described in figure 
\begin_inset LatexCommand \ref{fig:xml-schema-info-errors}

\end_inset

.
 Here follows an example of such response:
\end_layout

\begin_layout Standard
\begin_inset Box Boxed
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout LyX-Code

\size footnotesize
<response>   
\end_layout

\begin_layout LyX-Code

\size footnotesize
   <element schemma="iso19139" name="blablabla" error="not-found"/>
\end_layout

\begin_layout LyX-Code

\size footnotesize
</response> 
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\align center
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Standard
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="4" columns="2">
<features>
<column alignment="left" valignment="top" leftline="true" width="0">
<column alignment="left" valignment="top" leftline="true" rightline="true" width="0">
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\series bold
Error code
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard

\series bold
Description
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
unknown-schema
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
The specified schema is not supported
\end_layout

\end_inset
</cell>
</row>
<row topline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
unknown-namespace
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
The namespace of the specified prefix was not found
\end_layout

\end_inset
</cell>
</row>
<row topline="true" bottomline="true">
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
not-found
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Standard
The requested element / codelist was not found
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Caption
\begin_inset LatexCommand \label{fig:xml-schema-info-errors}

\end_inset

Possible errors returned by 
\family sans
xml.schema.info
\family default
 service.
\end_layout

\end_inset


\end_layout

\begin_layout Part
Settings internal structure
\end_layout

\begin_layout Chapter
\begin_inset LatexCommand \label{cha:Settings-hierarchy}

\end_inset

Settings hierarchy
\end_layout

\begin_layout Section
Introduction
\end_layout

\begin_layout Standard
GeoNetwork stores many options and information inside the 
\family sans
\series bold
Settings
\family default
\series default
 table.
 Information is grouped into hierarchies where each node has a key/value
 pair and can have many children.
 Each key is limited to 32 characters while each value is limited to 250.
 The 2 top level hierarchies are 
\family sans
\series bold
system
\family default
\series default
 and 
\family sans
\series bold
harvesting
\family default
\series default
.
\end_layout

\begin_layout Standard
In the following sections, the indentation is used to show hierarchies.
 Names in bold represent keys with the value's datatype in parenthesys.
 An 
\emph on
italic
\emph default
 font is used to indicate basic types (string, integer, boolean) while normal
 font with a | is used to represent a set of allowed values.
 Regarding the boolean type, value can be only 
\family sans
\series bold
true
\family default
\series default
 or 
\family sans
\series bold
false
\family default
\series default
.
 A missing datatype means that the value of the node is not used.
 Square brackets indicate cardinality.
 If they are missing, a cardinality of [1..1] should be considered.
\end_layout

\begin_layout Section

\series bold
\begin_inset LatexCommand \label{sec:The-system-hierarchy}

\end_inset

The 
\family sans
\series default
system
\family default
\series bold
 hierarchy
\end_layout

\begin_layout Itemize

\family sans
\series bold
site
\family default
\series default
 : Contains information about the site
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
name
\family default
\series default
 (
\emph on
string
\emph default
) : Name used to present this site to other sites.
 Used to fill comboboxes or lists.
\end_layout

\begin_layout Itemize

\family sans
\series bold
organization
\family default
\series default
 (
\emph on
string
\emph default
) : Name of the organization/company/institute that is running GeoNetwork
\end_layout

\begin_layout Itemize

\family sans
\series bold
siteId
\family default
\series default
 (
\emph on
string
\emph default
) : A UUID that uniquely identifies the site.
 It is generated by the installer.
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
platform
\series default
 : Contains information about the current version
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
version
\family default
\series default
 (
\emph on
string
\emph default
) : GeoNetwork's version in the X.Y.Z format
\end_layout

\begin_layout Itemize

\family sans
\series bold
subVersion
\family default
\series default
 (
\emph on
string
\emph default
) : A small description about the version, like 'alpha-1', 'beta' etc...
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
server
\family default
\series default
 : Used when it is necessary to build absolute URLs to the GeoNetwork server.
 This is the case, for example, when creating links inside a metadata or
 when providing CS/W capabilities.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
host
\family default
\series default
 (
\emph on
string
\emph default
) : Main HTTP server's address
\end_layout

\begin_layout Itemize

\family sans
\series bold
port
\family default
\series default
 (
\emph on
integer
\emph default
) : Main HTTP server's port (can be empty)
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
intranet
\family default
\series default
 : specify the network of the intranet
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
network
\family default
\series default
 (
\emph on
string
\emph default
) : Network's address
\end_layout

\begin_layout Itemize

\family sans
\series bold
netmask
\family default
\series default
 (
\emph on
string
\emph default
) : Network's netmask
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
z3950
\family default
\series default
 : A container for Z39.50 server parameters
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
enable
\series default
 (
\emph on
boolean
\emph default
) : If true, GeoNetwork will start the Z30.50 server
\end_layout

\begin_layout Itemize

\family sans
\series bold
port
\family default
\series default
 (
\emph on
integer
\emph default
) : The port opened by GeoNetwork to listen to Z39.50 requests.
 Usually is 2100.
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
proxy
\family default
\series default
 : This container speficy proxy configuration to use
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
use
\family default
\series default
 (
\emph on
boolean
\emph default
) : If true, GeoNetwork will use the given proxy for outgoing connections
\end_layout

\begin_layout Itemize

\family sans
\series bold
host
\family default
\series default
 (
\emph on
string
\emph default
) : Proxy's host
\end_layout

\begin_layout Itemize

\family sans
\series bold
port
\family default
\series default
 (
\emph on
integer
\emph default
) : Proxy's port
\end_layout

\begin_layout Itemize

\family sans
\series bold
username
\family default
\series default
 (
\emph on
string
\emph default
) : Proxy's credentials.
\end_layout

\begin_layout Itemize

\family sans
\series bold
password
\family default
\series default
 (
\emph on
string
\emph default
) : Proxy's credentials.
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
feedback
\family default
\series default
 : Feedback is sent with proper web form or when downloading a resource.
 
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
email
\family default
\series default
 (
\emph on
string
\emph default
) : email address of a GeoNetwork administrator or someone else
\end_layout

\begin_layout Itemize

\family sans
\series bold
mailServer
\series default
 : This container represents the mail server that will be used to send emails
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
host
\family default
\series default
 (
\emph on
string
\emph default
) : Address of the SMTP server to use
\end_layout

\begin_layout Itemize

\family sans
\series bold
port
\family default
\series default
 (
\emph on
string
\emph default
) : SMTP port to use
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize

\family sans
\series bold
removedMetadata
\family default
\series default
 : This container contains settings about removed metadata.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
dir
\family default
\series default
 : This folder will contain removed metadata in MEF format.
 It gets populated when the user deletes a metadata using the web interface.
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
ldap
\family default
\series default
 : Parameters for LDAP authentication
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
use
\family default
\series default
 (
\emph on
boolean
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
host
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
port
\family default
\series default
 (
\emph on
integer
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
defaultProfile
\family default
\series default
 (
\emph on
string
\emph default
) : Default GeoNetwork's profile to use when the 
\family sans
profile
\family default
 user attribute does not exist.
\end_layout

\begin_layout Itemize

\family sans
\series bold
login
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
userDN
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
password
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
distinguishedNames
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
base
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
users
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
userAttribs
\family default
\series default
 : A container for user attributes present into the LDAP directory that
 must be retrieved and used to create the user in GeoNetwork.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
name
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
password
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
profile
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\end_deeper
\end_deeper
\begin_layout Section
Harvesting nodes
\end_layout

\begin_layout Standard
The second top level hierarchy is 
\family sans
\series bold
harvesting
\family default
\series default
.
 All nodes added using the web interface are stored here.
 Each child has 
\family sans
\series bold
node
\family default
\series default
 in its key and its value can be 
\family sans
\series bold
geonetwork
\family default
\series default
, 
\family sans
\series bold
webdav
\family default
\series default
, 
\family sans
\series bold
csw
\family default
\series default
 or another depending on the node's type.
\end_layout

\begin_layout Standard
All harvesting nodes share a common setting structure, which is used by
 the harvesting engine to retrieve these common parameters.
 This imply that any new harvesting type must honor this structure, which
 is the following:
\end_layout

\begin_layout Itemize

\family sans
\series bold
site
\family default
\series default
 : A container for site information.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
name
\family default
\series default
 (
\emph on
string
\emph default
) : Node's name as shown in the harvesting list.
\end_layout

\begin_layout Itemize

\family sans
\series bold
uuid
\family default
\series default
 (
\emph on
string
\emph default
) : A unique identifier assigned by the system when the harvesting node
 is created.
\end_layout

\begin_layout Itemize

\family sans
\series bold
useAccount
\family default
\series default
 (
\emph on
boolean
\emph default
) : Indicates if the harvester has to authenticate to access the data.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
username
\family default
\series default
 (
\emph on
string
\emph default
) :
\end_layout

\begin_layout Itemize

\family sans
\series bold
password
\family default
\series default
 (
\emph on
string
\emph default
) :
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize

\family sans
\series bold
options
\family default
\series default
 :
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
every
\family default
\series default
 (
\emph on
integer
\emph default
) : Timeout, in minutes, between 2 consecutive harvesting.
\end_layout

\begin_layout Itemize

\family sans
\series bold
oneRunOnly
\family default
\series default
 (
\emph on
boolean
\emph default
) : If true, the harvester will harvest one time from this node and then
 it will set the status to inactive.
\end_layout

\begin_layout Itemize

\family sans
\series bold
status
\family default
\series default
 (active|inactive) : Indicates if the harvesting from this node is stopped
 (inactive) or if the harvester is waiting until the timeout comes.
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
privileges
\family default
\series default
 [0..1]
\family sans
\series bold
 
\family default
:
\series default
 This is a container for privileges to assign to each imported metadata
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
group
\family default
\series default
 (
\emph on
integer
\emph default
) [0..n] : Indicate a local group.
 The node's value is its local identifier.
 There can be several group nodes each with its set of privileges.
 
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
operation
\family default
\series default
 (
\emph on
integer
\emph default
) [0..n] : Privilege to assign to the group.
 The node's value is the numeric id of the operation like 0=view, 1=download,
 2=edit etc...
\end_layout

\end_deeper
\end_deeper
\begin_layout Itemize

\family sans
\series bold
categories
\family default
\series default
 [0..1] : This is a container for categories to assign to each imported metadata
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
category
\family default
\series default
 (
\emph on
integer
\emph default
) [0..n] : Indicate a local category and the node's value is its local identifier.
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
info
\family default
\series default
 : Just a container for some information about harvesting from this node.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
lastRun
\family default
\series default
 (
\emph on
string
\emph default
) : If not empty, tells when the harvester harvested from this node.
 The value is the current time in millis since 1 January, 1970.
\end_layout

\end_deeper
\begin_layout Standard
Privileges and categories nodes can or cannot be present depending on the
 harvesting type.
 In the following structures, this common structure is not shown.
 Only extra information specific to the harvesting type is described.
\end_layout

\begin_layout Subsection
Nodes of type 
\family sans
geonetwork
\end_layout

\begin_layout Standard
This is the native harvesting supported by geonetwork 2.1 and above.
\end_layout

\begin_layout Itemize

\family sans
\series bold
site
\family default
\series default
 : Contains host and account information
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
host
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
port
\family default
\series default
 (
\emph on
integer
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
servlet
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
search
\family default
\series default
 [0..n] : Contains the search parameters.
 If this element is missing, an unconstrained search will be performed.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
freeText
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
title
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
abstract
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
keywords
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
digital
\family default
\series default
 (
\emph on
boolean
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
hardcopy
\family default
\series default
 (
\emph on
boolean
\emph default
) 
\end_layout

\begin_layout Itemize

\family sans
\series bold
source
\family default
\series default
 (
\emph on
string
\emph default
) 
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
groupsCopyPolicy
\family default
\series default
 [0..n] : Represents a copy policy for a remote group.
 It is used to maintain remote privileges on harvested metadata.
\end_layout

\begin_deeper
\begin_layout Itemize
name (
\emph on
string
\emph default
) : Internal name (not localized) of a remote group.
\end_layout

\begin_layout Itemize
policy (
\emph on
string
\emph default
) : Copy policy.
 For the group 
\family sans
\series bold
all
\family default
\series default
, policies are: 
\family sans
\series bold
copy
\family default
\series default
, 
\family sans
\series bold
copyToIntranet
\family default
\series default
.
 For all other groups, policies are: 
\family sans
\series bold
copy
\family default
\series default
, 
\family sans
\series bold
createAndCopy
\family default
\series default
.
 The intranet group is not considered.
\end_layout

\end_deeper
\begin_layout Subsection
Nodes of type 
\family sans
geonetwork20
\end_layout

\begin_layout Standard
This type allows harvesting from old geonetwork 2.0.x nodes.
\end_layout

\begin_layout Itemize

\family sans
\series bold
site
\family default
\series default
 : Contains host and account information
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
host
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
port
\family default
\series default
 (
\emph on
integer
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
servlet
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
search
\family default
\series default
 [0..n] : Contains the search parameters.
 If this element is missing no harvesting will be performed but the host's
 parameters will be used to connect to the remote node.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
freeText
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
title
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
abstract
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
keywords
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
digital
\family default
\series default
 (
\emph on
boolean
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
hardcopy
\family default
\series default
 (
\emph on
boolean
\emph default
) 
\end_layout

\begin_layout Itemize

\family sans
\series bold
siteId
\family default
\series default
 (
\emph on
string
\emph default
) 
\end_layout

\end_deeper
\begin_layout Subsection
Nodes of type 
\family sans
webdav
\end_layout

\begin_layout Standard
This harvesting type is capable of connecting to a web server which is WEB
 DAV enabled.
\end_layout

\begin_layout Itemize

\family sans
\series bold
site
\family default
\series default
 : Contains the URL to connect to and account information
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
url
\family default
\series default
 (
\emph on
string
\emph default
) : URL to connect to.
 Must be well formed, starting with 'http://', 'file://' or a supported
 protocol.
\end_layout

\begin_layout Itemize

\family sans
\series bold
icon
\family default
\series default
 (
\emph on
string
\emph default
) : This is the icon that will be used as the metadata source's logo.
 The image is taken from the 
\family sans
images/harvesting
\family default
 folder and copied to the 
\family sans
images/logos
\family default
 folder.
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
options
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
recurse
\family default
\series default
 (
\emph on
boolean
\emph default
) : Indicates if the remote folder must be recursively scanned for metadata.
\end_layout

\begin_layout Itemize

\family sans
\series bold
validate
\family default
\series default
 (
\emph on
boolean
\emph default
) : If set, the harvester will validate the metadata against its schema
 and the metadata will be harvested only if it is valid.
\end_layout

\end_deeper
\begin_layout Subsection
Nodes of type 
\family sans
csw
\end_layout

\begin_layout Standard
This type of harvesting is capable of querying a Catalogue Services for
 the Web (CSW) server and retrieving all found metadata.
\end_layout

\begin_layout Itemize

\family sans
\series bold
site
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
capabUrl
\family default
\series default
 (
\emph on
string
\emph default
) : URL of the capabilities file that will be used to retrieve the operations
 address.
\end_layout

\begin_layout Itemize

\family sans
\series bold
icon
\family default
\series default
 (
\emph on
string
\emph default
) : This is the icon that will be used as the metadata source's logo.
 The image is taken from the 
\family sans
images/harvesting
\family default
 folder and copied to the 
\family sans
images/logos
\family default
 folder.
\end_layout

\end_deeper
\begin_layout Itemize

\family sans
\series bold
search
\family default
\series default
 [0..n] : Contains search parameters.
 If this element is missing, an unconstrained search will be performed.
\end_layout

\begin_deeper
\begin_layout Itemize

\family sans
\series bold
freeText
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
title
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
abstract
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\begin_layout Itemize

\family sans
\series bold
subject
\family default
\series default
 (
\emph on
string
\emph default
)
\end_layout

\end_body
\end_document
